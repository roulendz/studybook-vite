var ue=(ne,z)=>()=>(z||ne((z={exports:{}}).exports,z),z.exports);var le=ue(Y=>{(()=>{var ne={"./src/core/controller.js":(P,v,d)=>{d.r(v),d.d(v,{Controller:()=>l});var j=d("./src/util/events.js"),g=d("./src/core/request-builder.js");function w(s,e){if(!(s instanceof e))throw new TypeError("Cannot call a class as a function")}function O(s,e){for(var t=0;t<e.length;t++){var a=e[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(s,a.key,a)}}function y(s,e,t){return e&&O(s.prototype,e),t&&O(s,t),Object.defineProperty(s,"prototype",{writable:!1}),s}var l=function(){function s(){w(this,s),this.started=!1,this.documentVisible=!0}return y(s,[{key:"start",value:function(){var t=this;this.started||(window.onbeforeunload=this.documentOnBeforeUnload,addEventListener("DOMContentLoaded",function(){return t.render()}),addEventListener("page:updated",function(){return t.render()}),addEventListener("ajax:update-complete",function(){return t.render()}),addEventListener("visibilitychange",function(){return t.documentOnVisibilityChange()}),j.Events.on(document,"submit","[data-request]",this.documentOnSubmit),j.Events.on(document,"input","input[data-request][data-track-input]",this.documentOnKeyup),j.Events.on(document,"change","select[data-request], input[type=radio][data-request], input[type=checkbox][data-request], input[type=file][data-request]",this.documentOnChange),j.Events.on(document,"keydown","input[type=text][data-request], input[type=submit][data-request], input[type=password][data-request]",this.documentOnKeydown),j.Events.on(document,"click","a[data-request], button[data-request], input[type=button][data-request], input[type=submit][data-request]",this.documentOnClick),this.started=!0)}},{key:"stop",value:function(){this.started&&(this.started=!1)}},{key:"render",value:function(t){j.Events.dispatch("before-render"),j.Events.dispatch("render"),dispatchEvent(new Event("resize")),this.documentOnRender(t)}},{key:"documentOnVisibilityChange",value:function(t){this.documentVisible=!document.hidden,this.documentVisible&&this.documentOnRender()}},{key:"documentOnRender",value:function(t){this.documentVisible&&document.querySelectorAll("[data-auto-submit]").forEach(function(a){var r=a.dataset.autoSubmit||0;a.removeAttribute("data-auto-submit"),setTimeout(function(){g.RequestBuilder.fromElement(a)},r)})}},{key:"documentOnSubmit",value:function(t){t.preventDefault(),g.RequestBuilder.fromElement(t.target)}},{key:"documentOnClick",value:function(t){t.preventDefault(),g.RequestBuilder.fromElement(t.target)}},{key:"documentOnChange",value:function(t){g.RequestBuilder.fromElement(t.target)}},{key:"documentOnKeyup",value:function(t){var a=t.target,r=a.dataset.ocLastValue;if(["email","number","password","search","text"].indexOf(a.type)!==-1&&!(r!==void 0&&r==a.value)){a.dataset.ocLastValue=a.value,this.dataTrackInputTimer!==void 0&&clearTimeout(this.dataTrackInputTimer);var n=a.getAttribute("data-track-input");n||(n=300);var i=this;this.dataTrackInputTimer=setTimeout(function(){i.lastDataTrackInputRequest&&i.lastDataTrackInputRequest.abort(),i.lastDataTrackInputRequest=g.RequestBuilder.fromElement(a)},n)}}},{key:"documentOnKeydown",value:function(t){t.key==="Enter"&&(t.preventDefault(),this.dataTrackInputTimer!==void 0&&clearTimeout(this.dataTrackInputTimer),g.RequestBuilder.fromElement(t.target))}},{key:"documentOnBeforeUnload",value:function(t){window.ocUnloading=!0}}]),s}()},"./src/core/index.js":(P,v,d)=>{d.r(v),d.d(v,{default:()=>O});var j=d("./src/util/events.js"),g=d("./src/core/namespace.js");function w(s){return w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(s)}const O=g.default;window.oc||(window.oc={}),window.oc.AjaxFramework||(window.oc.AjaxFramework=g.default,window.oc.request=g.default.requestElement,window.oc.parseJSON=g.default.parseJSON,window.oc.serializeJSON=g.default.serializeJSON,window.oc.Events=j.Events,!y()&&!l()&&g.default.start());function y(){return typeof define=="function"&&d.amdO}function l(){return(typeof Y>"u"?"undefined":w(Y))=="object"&&!0}},"./src/core/migrate.js":(P,v,d)=>{d.r(v),d.d(v,{Migrate:()=>s});var j=d("./src/core/request-builder.js"),g=d("./src/util/json-parser.js");function w(e){return w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(e)}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,a){return t&&y(e.prototype,t),a&&y(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}var s=function(){function e(){O(this,e)}return l(e,[{key:"bind",value:function(){this.bindRequestFunc(),this.bindRenderFunc(),this.bindjQueryEvents()}},{key:"bindRequestFunc",value:function(){var a=$.fn.request;$.fn.request=function(r,n){var i=w(n)==="object"?n:{};return new j.RequestBuilder(this.get(0),r,i)},$.fn.request.Constructor=j.RequestBuilder,$.request=function(r,n){return $(document).request(r,n)},$.fn.request.noConflict=function(){return $.fn.request=a,this}}},{key:"bindRenderFunc",value:function(){$.fn.render=function(a){$(document).on("render",a)}}},{key:"bindjQueryEvents",value:function(){this.migratejQueryEvent(document,"ajax:setup","ajaxSetup",["context"]),this.migratejQueryEvent(document,"ajax:promise","ajaxPromise",["context"]),this.migratejQueryEvent(document,"ajax:fail","ajaxFail",["context","data","responseCode","xhr"]),this.migratejQueryEvent(document,"ajax:done","ajaxDone",["context","data","responseCode","xhr"]),this.migratejQueryEvent(document,"ajax:always","ajaxAlways",["context","data","responseCode","xhr"]),this.migratejQueryEvent(document,"ajax:before-redirect","ajaxRedirect"),this.migratejQueryEvent(document,"ajax:update","ajaxUpdate",["context","data","responseCode","xhr"]),this.migratejQueryEvent(document,"ajax:before-replace","ajaxBeforeReplace"),this.migratejQueryEvent(document,"ajax:before-request","oc.beforeRequest",["context"]),this.migratejQueryEvent(document,"ajax:before-update","ajaxBeforeUpdate",["context","data","responseCode","xhr"]),this.migratejQueryEvent(document,"ajax:request-success","ajaxSuccess",["context","data","responseCode","xhr"]),this.migratejQueryEvent(document,"ajax:request-complete","ajaxComplete",["context","data","responseCode","xhr"]),this.migratejQueryEvent(document,"ajax:request-error","ajaxError",["context","message","responseCode","xhr"]),this.migratejQueryEvent(document,"ajax:before-validate","ajaxValidation",["context","message","fields"]),this.migratejQueryEvent(window,"ajax:before-send","ajaxBeforeSend",["context"]),this.migratejQueryEvent(window,"ajax:update-complete","ajaxUpdateComplete",["context","data","responseCode","xhr"]),this.migratejQueryEvent(window,"ajax:invalid-field","ajaxInvalidField",["element","fieldName","errorMsg","isFirst"]),this.migratejQueryEvent(window,"ajax:confirm-message","ajaxConfirmMessage",["message","promise"]),this.migratejQueryEvent(window,"ajax:error-message","ajaxErrorMessage",["message"]),this.migratejQueryAttachData(document,"ajax:setup","a[data-request], button[data-request], form[data-request], a[data-handler], button[data-handler]")}},{key:"migratejQueryEvent",value:function(a,r,n){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[],o=this;$(a).on(r,function(u){o.triggerjQueryEvent(u.originalEvent,n,i)})}},{key:"triggerjQueryEvent",value:function(a,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],i=$.Event(r),o=this.buildDetailArgs(a,n);$(a.target).trigger(i,o),i.isDefaultPrevented()&&a.preventDefault()}},{key:"buildDetailArgs",value:function(a,r){var n=[];return r.forEach(function(i){n.push(a.detail[i])}),n}},{key:"migratejQueryAttachData",value:function(a,r,n){$(a).on(r,n,function(i){var o=$(this).data("request-data");if(o){var u=i.detail.context.options;o.constructor==={}.constructor?Object.assign(u.data,o):typeof o=="string"&&Object.assign(u.data,g.JsonParser.paramToObj("request-data",o))}})}}]),e}()},"./src/core/namespace.js":(P,v,d)=>{d.r(v),d.d(v,{default:()=>s});var j=d("./src/core/controller.js"),g=d("./src/core/migrate.js"),w=d("./src/core/request-builder.js"),O=d("./src/util/json-parser.js"),y=d("./src/util/form-serializer.js"),l=new j.Controller;const s={controller:l,parseJSON:O.JsonParser.parseJSON,serializeJSON:y.FormSerializer.serializeJSON,requestElement:w.RequestBuilder.fromElement,start:function(){l.start(),window.jQuery&&new g.Migrate().bind()},stop:function(){l.stop()}}},"./src/core/request-builder.js":(P,v,d)=>{d.r(v),d.d(v,{RequestBuilder:()=>t});var j=d("./src/request/namespace.js"),g=d("./src/util/json-parser.js");function w(n,i){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(n);i&&(u=u.filter(function(f){return Object.getOwnPropertyDescriptor(n,f).enumerable})),o.push.apply(o,u)}return o}function O(n){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?w(Object(o),!0).forEach(function(u){y(n,u,o[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):w(Object(o)).forEach(function(u){Object.defineProperty(n,u,Object.getOwnPropertyDescriptor(o,u))})}return n}function y(n,i,o){return i in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o,n}function l(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")}function s(n,i){for(var o=0;o<i.length;o++){var u=i[o];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function e(n,i,o){return i&&s(n.prototype,i),o&&s(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n}var t=function(){function n(i,o,u){return l(this,n),this.options=u||{},this.ogElement=i,this.element=this.findElement(i),this.element?(this.assignAsEval("beforeUpdateFunc","requestBeforeUpdate"),this.assignAsEval("afterUpdateFunc","requestAfterUpdate"),this.assignAsEval("successFunc","requestSuccess"),this.assignAsEval("errorFunc","requestError"),this.assignAsEval("completeFunc","requestComplete"),this.assignAsData("progressBar","requestProgressBar"),this.assignAsData("confirm","requestConfirm"),this.assignAsData("redirect","requestRedirect"),this.assignAsData("loading","requestLoading"),this.assignAsData("form","requestForm"),this.assignAsData("url","requestUrl"),this.assignAsData("bulk","requestBulk",{emptyAsTrue:!0}),this.assignAsData("files","requestFiles",{emptyAsTrue:!0}),this.assignAsData("flash","requestFlash",{emptyAsTrue:!0}),this.assignAsData("download","requestDownload",{emptyAsTrue:!0}),this.assignAsData("update","requestUpdate",{parseJson:!0}),this.assignAsData("query","requestQuery",{parseJson:!0}),this.assignAsData("browserTarget","browserTarget"),this.assignAsData("browserValidate","browserValidate",{emptyAsTrue:!0}),this.assignAsMetaData("update","ajaxRequestUpdate",{parseJson:!0,mergeValue:!0}),this.assignRequestData(),o||(o=this.getHandlerName()),j.default.sendElement(this.element,o,this.options)):j.default.send(o,this.options)}return e(n,[{key:"findElement",value:function(o){if(!o||o===document)return null;if(o.matches("[data-request]"))return o;var u=o.closest("[data-request]");return u||o}},{key:"getHandlerName",value:function(){return this.element.dataset.dataRequest?this.element.dataset.dataRequest:this.element.getAttribute("data-request")}},{key:"assignAsEval",value:function(o,u){var f;this.element.dataset[u]?f=this.element.dataset[u]:f=this.element.getAttribute("data-"+r(u)),f&&(this.options[o]=function(c,h){return new Function("data",f).apply(c,[h])})}},{key:"assignAsData",value:function(o,u){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},c=f.parseJson,h=c===void 0?!1:c,E=f.emptyAsTrue,p=E===void 0?!1:E,k;this.element.dataset[u]?k=this.element.dataset[u]:k=this.element.getAttribute("data-"+r(u)),k!==null&&(h?this.options[o]=g.JsonParser.paramToObj("data-"+r(u),k):this.options[o]=this.castAttrToOption(k,p))}},{key:"assignAsMetaData",value:function(o,u){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},c=f.mergeValue,h=c===void 0?!0:c,E=f.parseJson,p=E===void 0?!1:E,k=f.emptyAsTrue,m=k===void 0?!1:k,b=document.documentElement.querySelector('head meta[name="'+r(u)+'"]');if(b){var R=b.getAttribute("content");p?R=g.JsonParser.paramToObj(r(u),R):R=this.castAttrToOption(R,m),h?this.options[o]=O(O({},this.options[o]),R):this.options[o]=R}}},{key:"castAttrToOption",value:function(o,u){return u&&o===""||o==="true"||o==="1"?!0:o==="false"||o==="0"?!1:o}},{key:"assignRequestData",value:function(){var o={};this.options.data&&Object.assign(o,this.options.data);var u=this.ogElement.getAttribute("data-request-data");u&&Object.assign(o,g.JsonParser.paramToObj("data-request-data",u)),a(this.ogElement,"[data-request-data]").reverse().forEach(function(f){Object.assign(o,g.JsonParser.paramToObj("data-request-data",f.getAttribute("data-request-data")))}),this.options.data=o}}],[{key:"fromElement",value:function(o,u,f){return typeof o=="string"&&(o=document.querySelector(o)),new n(o,u,f)}}]),n}();function a(n,i){var o=[];if(!n.parentNode)return o;for(var u=n.parentNode.closest(i);u;)o.push(u),u=u.parentNode.closest(i);return o}function r(n){return n.replace(/[A-Z]/g,function(i){return"-".concat(i.toLowerCase())})}},"./src/extras/progress-bar.js":(P,v,d)=>{d.r(v),d.d(v,{ProgressBar:()=>e});var j=d("./src/util/index.js"),g;function w(a,r){return r||(r=a.slice(0)),Object.freeze(Object.defineProperties(a,{raw:{value:Object.freeze(r)}}))}function O(a,r){if(!(a instanceof r))throw new TypeError("Cannot call a class as a function")}function y(a,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(a,i.key,i)}}function l(a,r,n){return r&&y(a.prototype,r),n&&y(a,n),Object.defineProperty(a,"prototype",{writable:!1}),a}function s(a,r,n){return r in a?Object.defineProperty(a,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):a[r]=n,a}var e=function(){function a(){var r=this;O(this,a),this.stylesheetElement=this.createStylesheetElement(),this.progressElement=this.createProgressElement(),this.hiding=!1,this.value=0,this.visible=!1,this.trickle=function(){r.setValue(r.value+Math.random()/100)}}return l(a,[{key:"show",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};n.cssClass&&this.progressElement.classList.add(n.cssClass),this.visible||(this.visible=!0,this.installStylesheetElement(),this.installProgressElement(),this.startTrickling())}},{key:"hide",value:function(){var n=this;this.visible&&!this.hiding&&(this.hiding=!0,this.fadeProgressElement(function(){n.uninstallProgressElement(),n.stopTrickling(),n.visible=!1,n.hiding=!1}))}},{key:"setValue",value:function(n){this.value=n,this.refresh()}},{key:"installStylesheetElement",value:function(){a.stylesheetReady||(document.head.insertBefore(this.stylesheetElement,document.head.firstChild),a.stylesheetReady=!0)}},{key:"installProgressElement",value:function(){this.progressElement.style.width="0",this.progressElement.style.opacity="1",document.documentElement.insertBefore(this.progressElement,document.body),this.refresh()}},{key:"fadeProgressElement",value:function(n){this.progressElement.style.opacity="0",setTimeout(n,a.animationDuration*1.5)}},{key:"uninstallProgressElement",value:function(){this.progressElement.parentNode&&document.documentElement.removeChild(this.progressElement)}},{key:"startTrickling",value:function(){this.trickleInterval||(this.trickleInterval=setInterval(this.trickle,a.animationDuration))}},{key:"stopTrickling",value:function(){clearInterval(this.trickleInterval),delete this.trickleInterval}},{key:"refresh",value:function(){var n=this;requestAnimationFrame(function(){n.progressElement.style.width="".concat(10+n.value*90,"%")})}},{key:"createStylesheetElement",value:function(){var n=document.createElement("style");return n.textContent=a.defaultCSS,n}},{key:"createProgressElement",value:function(){var n=document.createElement("div");return n.className="oc-progress-bar",n}}],[{key:"defaultCSS",get:function(){return(0,j.unindent)(g||(g=w([`
        .oc-progress-bar {
            position: fixed;
            display: block;
            top: 0;
            left: 0;
            height: 3px;
            background: #0076ff;
            z-index: 9999;
            transition:
                width `,`ms ease-out,
                opacity `,"ms ",`ms ease-in;
            transform: translate3d(0, 0, 0);
        }
    `])),a.animationDuration,a.animationDuration/2,a.animationDuration/2)}},{key:"progressBar",get:function(){return{show:function(){var i=t();i.setValue(0),i.show()},hide:function(){var i=t();i.setValue(100),i.hide()}}}}]),a}();s(e,"instance",null),s(e,"stylesheetReady",!1),s(e,"animationDuration",300);function t(){return e.instance||(e.instance=new e),e.instance}},"./src/request/actions.js":(P,v,d)=>{d.r(v),d.d(v,{Actions:()=>o,ActionsUpdateMode:()=>i});var j=d("./src/request/asset-manager.js"),g=d("./src/util/http-request.js"),w=d("./src/util/deferred.js");function O(p){return e(p)||s(p)||l(p)||y()}function y(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function l(p,k){if(p){if(typeof p=="string")return t(p,k);var m=Object.prototype.toString.call(p).slice(8,-1);if(m==="Object"&&p.constructor&&(m=p.constructor.name),m==="Map"||m==="Set")return Array.from(p);if(m==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m))return t(p,k)}}function s(p){if(typeof Symbol<"u"&&p[Symbol.iterator]!=null||p["@@iterator"]!=null)return Array.from(p)}function e(p){if(Array.isArray(p))return t(p)}function t(p,k){(k==null||k>p.length)&&(k=p.length);for(var m=0,b=new Array(k);m<k;m++)b[m]=p[m];return b}function a(p,k){if(!(p instanceof k))throw new TypeError("Cannot call a class as a function")}function r(p,k){for(var m=0;m<k.length;m++){var b=k[m];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(p,b.key,b)}}function n(p,k,m){return k&&r(p.prototype,k),m&&r(p,m),Object.defineProperty(p,"prototype",{writable:!1}),p}var i={replaceWith:"replace",prepend:"prepend",append:"append",update:"update"},o=function(){function p(k,m,b){a(this,p),this.el=k.el,this.delegate=k,this.context=m,this.options=b,this.context.start=this.start.bind(this),this.context.success=this.success.bind(this),this.context.error=this.error.bind(this),this.context.complete=this.complete.bind(this)}return n(p,[{key:"invoke",value:function(m,b){if(this.options[m])return this.options[m].apply(this.context,b);if(this[m])return this[m].apply(this,O(b))}},{key:"invokeFunc",value:function(m,b){if(this.options[m])return this.options[m](this.el,b)}},{key:"start",value:function(m){this.invoke("markAsUpdating",[!0])}},{key:"success",value:function(m,b,R){if(this.invoke("beforeUpdate",[m,b,R])!==!1&&this.invokeFunc("beforeUpdateFunc",m)!==!1&&this.delegate.applicationAllowsUpdate(m,b,R)&&!(this.delegate.options.download&&m instanceof Blob&&this.invoke("handleFileDownload",[m,R]))){if(this.delegate.options.flash&&m.X_OCTOBER_FLASH_MESSAGES)for(var C in m.X_OCTOBER_FLASH_MESSAGES)this.invoke("handleFlashMessage",[m.X_OCTOBER_FLASH_MESSAGES[C],C]);var _=this,B=this.invoke("handleUpdateResponse",[m,b,R]);return B.done(function(){_.delegate.notifyApplicationRequestSuccess(m,b,R),_.invokeFunc("successFunc",m)}),B}}},{key:"error",value:function(m,b,R){var C,_=new w.Deferred,B=this;if(!(window.ocUnloading!==void 0&&window.ocUnloading||b==g.SystemStatusCode.userAborted))return this.delegate.toggleRedirect(!1),b==406&&m?(C=m.X_OCTOBER_ERROR_MESSAGE,_=this.invoke("handleUpdateResponse",[m,b,R])):(C=m,_.resolve()),_.done(function(){B.el!==document&&B.el.setAttribute("data-error-message",C),B.delegate.applicationAllowsError(m,b,R)&&B.invokeFunc("errorFunc",m)!==!1&&B.invoke("handleErrorMessage",[C])}),_}},{key:"complete",value:function(m,b,R){this.delegate.notifyApplicationRequestComplete(m,b,R),this.invokeFunc("completeFunc",m),this.invoke("markAsUpdating",[!1])}},{key:"handleConfirmMessage",value:function(m){var b=this,R=new w.Deferred;R.done(function(){b.delegate.sendInternal()});var C=this.delegate.notifyApplicationConfirmMessage(m,R);if(C.defaultPrevented)return!1;if(m)return confirm(m)}},{key:"handleFlashMessage",value:function(m,b){}},{key:"handleErrorMessage",value:function(m){var b=this.delegate.notifyApplicationErrorMessage(m);b.defaultPrevented||m&&alert(m)}},{key:"handleValidationMessage",value:function(m,b){if(this.delegate.notifyApplicationBeforeValidate(m,b),!!this.delegate.formEl){var R=!0;for(var C in b){var _=C.replace(/\.(\w+)/g,"[$1]"),B=("."+C).replace(/\.(\w+)/g,"[$1]"),X=['[name="'+_+'"]:not([disabled])','[name="'+_+'[]"]:not([disabled])','[name$="'+B+'"]:not([disabled])','[name$="'+B+'[]"]:not([disabled])'],q=this.delegate.formEl.querySelector(X.join(", "));if(q){var A=this.delegate.notifyApplicationFieldInvalid(q,C,b[C],R);R&&(A.defaultPrevented||q.focus(),R=!1)}}}}},{key:"handleRedirectResponse",value:function(m){var b=this.delegate.notifyApplicationBeforeRedirect();b.defaultPrevented||(oc.useTurbo&&oc.useTurbo()?oc.visit(m):location.assign(m))}},{key:"markAsUpdating",value:function(m){var b=this.options.update||{};for(var R in b){var C=b[R],_=[];b._self&&R==this.options.partial&&this.delegate.partialEl?(C=b._self,_=[this.delegate.partialEl]):_=u(C,'[data-ajax-partial="'+R+'"]'),_.forEach(function(B){m?B.setAttribute("data-ajax-updating",""):B.removeAttribute("data-ajax-updating")})}}},{key:"handleUpdateResponse",value:function(m,b,R){var C=this,_=this.options.update||{},B=new w.Deferred;return B.done(function(){var X=function(){var x=_[q]||q,T=[];_._self&&q==C.options.partial&&C.delegate.partialEl?(x=_._self,T=[C.delegate.partialEl]):T=u(x,'[data-ajax-partial="'+q+'"]'),T.forEach(function(S){var D=f(x,S);if(D===i.replaceWith){var M=S.parentNode;S.insertAdjacentHTML("afterEnd",m[q]),M.removeChild(S),h(M,m[q])}else D===i.append?(S.insertAdjacentHTML("beforeEnd",m[q]),h(S,m[q])):D===i.prepend?(S.insertAdjacentHTML("afterBegin",m[q]),h(S,m[q])):(C.delegate.notifyApplicationBeforeReplace(S),S.innerHTML=m[q],c(S));C.delegate.notifyApplicationAjaxUpdate(S,m,b,R)})};for(var q in m)X();setTimeout(function(){C.delegate.notifyApplicationUpdateComplete(m,b,R),C.invoke("afterUpdate",[m,b,R]),C.invokeFunc("afterUpdateFunc",m)},0)}),m.X_OCTOBER_REDIRECT&&this.delegate.toggleRedirect(m.X_OCTOBER_REDIRECT),this.delegate.isRedirect&&this.invoke("handleRedirectResponse",[this.delegate.options.redirect]),m.X_OCTOBER_ERROR_FIELDS&&this.invoke("handleValidationMessage",[m.X_OCTOBER_ERROR_MESSAGE,m.X_OCTOBER_ERROR_FIELDS]),m.X_OCTOBER_ASSETS?j.AssetManager.load(m.X_OCTOBER_ASSETS,function(){return B.resolve()}):B.resolve(),B}},{key:"handleFileDownload",value:function(m,b){if(this.options.browserTarget)return window.open(window.URL.createObjectURL(m),this.options.browserTarget),!0;var R=typeof this.options.download=="string"?this.options.download:E(b);if(R){var C=document.createElement("a");return C.href=window.URL.createObjectURL(m),C.download=R,C.target="_blank",C.click(),window.URL.revokeObjectURL(C.href),!0}}},{key:"applyQueryToUrl",value:function(m){for(var b=new URLSearchParams(window.location.search),R=0,C=Object.keys(m);R<C.length;R++){var _=C[R];b.set(_,m[_])}var B=window.location.pathname+"?"+b.toString();oc.useTurbo&&oc.useTurbo()?oc.visit(B,{action:"swap",scroll:!1}):(history.replaceState(null,"",B),localStorage.setItem("ocPushStateReferrer",B))}}]),p}();function u(p,k){return p===!0?document.querySelectorAll(k):typeof p!="string"?[p]:["#",".","@","^","!","="].indexOf(p.charAt(0))===-1?[]:(["@","^","!","="].indexOf(p.charAt(0))!==-1&&(p=p.substring(1)),p||(p=k),document.querySelectorAll(p))}function f(p,k){if(typeof p=="string"){if(p.charAt(0)==="!")return i.replaceWith;if(p.charAt(0)==="@")return i.append;if(p.charAt(0)==="^")return i.prepend}return k.dataset.ajaxUpdateMode!==void 0?k.dataset.ajaxUpdateMode:i.update}function c(p){Array.from(p.querySelectorAll("script")).forEach(function(k){var m=document.createElement("script");Array.from(k.attributes).forEach(function(b){return m.setAttribute(b.name,b.value)}),m.appendChild(document.createTextNode(k.innerHTML)),k.parentNode.replaceChild(m,k)})}function h(p,k){var m=document.createElement("div");m.innerHTML=k,Array.from(m.querySelectorAll("script")).forEach(function(b){var R=document.createElement("script");Array.from(b.attributes).forEach(function(C){return R.setAttribute(C.name,C.value)}),R.appendChild(document.createTextNode(b.innerHTML)),p.appendChild(R),p.removeChild(R)})}function E(p){var k=p.getResponseHeader("Content-Disposition");if(!k)return null;for(var m=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/g,b=null,R=null;(R=m.exec(k))!==null;)b=R;return b!==null&&b[1]?/filename[^;*=\n]*\*=[^']*''/.exec(b[0])===null?b[1].replace(/['"]/g,""):decodeURIComponent(b[1].substring(b[1].indexOf("''")+2)):null}},"./src/request/asset-manager.js":(P,v,d)=>{d.r(v),d.d(v,{AssetManager:()=>O});function j(l,s){if(!(l instanceof s))throw new TypeError("Cannot call a class as a function")}function g(l,s){for(var e=0;e<s.length;e++){var t=s[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(l,t.key,t)}}function w(l,s,e){return s&&g(l.prototype,s),e&&g(l,e),Object.defineProperty(l,"prototype",{writable:!1}),l}var O=function(){function l(){j(this,l)}return w(l,[{key:"loadCollection",value:function(e,t){var a=this,r=e.js?e.js:[],n=e.css?e.css:[],i=e.img?e.img:[];r=y(r,function(h){return!document.querySelector('head script[src="'+h+'"]')}),n=y(n,function(h){return!document.querySelector('head link[href="'+h+'"]')});var o=0,u=!1,f=!1;if(r.length===0&&n.length===0&&i.length===0){t&&t();return}this.loadJavaScript(r,function(){u=!0,c()}),n.forEach(function(h){a.loadStyleSheet(h,function(){o++,c()})}),this.loadImage(i,function(){f=!0,c()});function c(){if(!f||!u||o<n.length)return!1;t&&t()}}},{key:"loadStyleSheet",value:function(e,t){var a=document.createElement("link");return a.setAttribute("rel","stylesheet"),a.setAttribute("type","text/css"),a.setAttribute("href",e),a.addEventListener("load",t,!1),typeof a<"u"&&document.getElementsByTagName("head")[0].appendChild(a),a}},{key:"loadJavaScript",value:function(e,t){if(e.length<=0)return t();var a=this,r=e.shift(),n=document.createElement("script");n.setAttribute("type","text/javascript"),n.setAttribute("src",r),n.addEventListener("load",function(){a.loadJavaScript(e,t)},!1),typeof n<"u"&&document.getElementsByTagName("head")[0].appendChild(n)}},{key:"loadImage",value:function(e,t){if(e.length<=0)return t();var a=0;e.forEach(function(r){var n=new Image;n.onload=function(){++a==e.length&&t&&t()},n.src=r})}}],[{key:"load",value:function(e,t){return new l().loadCollection(e,t)}}]),l}();function y(l,s){var e=[],t=l.length,a=0;for(a;a<t;a++)s(l[a])&&e.push(l[a]);return e}},"./src/request/data.js":(P,v,d)=>{d.r(v),d.d(v,{Data:()=>y});var j=d("./src/util/form-serializer.js");function g(l,s){if(!(l instanceof s))throw new TypeError("Cannot call a class as a function")}function w(l,s){for(var e=0;e<s.length;e++){var t=s[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(l,t.key,t)}}function O(l,s,e){return s&&w(l.prototype,s),e&&w(l,e),Object.defineProperty(l,"prototype",{writable:!1}),l}var y=function(){function l(s,e,t){g(this,l),this.userData=s||{},this.targetEl=e,this.formEl=t}return O(l,[{key:"getRequestData",value:function(){var e;return this.formEl?e=new FormData(this.formEl):e=new FormData,this.appendSingleInputElement(e),e}},{key:"getAsFormData",value:function(){return this.appendJsonToFormData(this.getRequestData(),this.userData)}},{key:"getAsQueryString",value:function(){return this.convertFormDataToQuery(this.getAsFormData())}},{key:"getAsJsonData",value:function(){return JSON.stringify(this.convertFormDataToJson(this.getAsFormData()))}},{key:"appendSingleInputElement",value:function(e){if(!(this.formEl||!this.targetEl)&&["INPUT","SELECT"].indexOf(this.targetEl.tagName)!==-1){var t=this.targetEl.name;!t||this.userData[t]!==void 0||(this.targetEl.type==="file"?this.targetEl.files.forEach(function(a){e.append(t,a)}):e.append(t,this.targetEl.value))}}},{key:"appendJsonToFormData",value:function(e,t,a){var r=this;for(var n in t){var i=n;a&&(i=a+"["+n+"]");var o=t[n];o&&o.constructor==={}.constructor?this.appendJsonToFormData(e,o,i):o&&o.constructor===[].constructor?o.forEach(function(u,f){u.constructor==={}.constructor||u.constructor===[].constructor?r.appendJsonToFormData(e,u,i+"["+f+"]"):e.append(i+"[]",r.castJsonToFormData(u))}):e.append(i,this.castJsonToFormData(o))}return e}},{key:"convertFormDataToQuery",value:function(e){var t=this.formDataToArray(e);return Object.keys(t).map(function(a){return a.endsWith("[]")?t[a].map(function(r){return encodeURIComponent(a)+"="+encodeURIComponent(r)}).join("&"):encodeURIComponent(a)+"="+encodeURIComponent(t[a])}).join("&")}},{key:"convertFormDataToJson",value:function(e){var t=this.formDataToArray(e),a={};for(var r in t)j.FormSerializer.assignToObj(a,r,t[r]);return a}},{key:"formDataToArray",value:function(e){return Object.fromEntries(Array.from(e.keys()).map(function(t){return[t,t.endsWith("[]")?e.getAll(t):e.getAll(t).pop()]}))}},{key:"castJsonToFormData",value:function(e){return e===null?"":e===!0?"1":e===!1?"0":e}}]),l}()},"./src/request/index.js":(P,v,d)=>{d.r(v),d.d(v,{default:()=>w});var j=d("./src/request/asset-manager.js"),g=d("./src/request/namespace.js");const w=g.default;window.oc||(window.oc={}),window.oc.AjaxRequest||(window.oc.AjaxRequest=g.default,window.oc.AssetManager=j.AssetManager,window.oc.ajax=g.default.send,window.oc.request||(window.oc.request=g.default.sendElement))},"./src/request/namespace.js":(P,v,d)=>{d.r(v),d.d(v,{default:()=>g});var j=d("./src/request/request.js");const g=j.Request},"./src/request/options.js":(P,v,d)=>{d.r(v),d.d(v,{Options:()=>y});function j(l){return j=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},j(l)}function g(l,s){if(!(l instanceof s))throw new TypeError("Cannot call a class as a function")}function w(l,s){for(var e=0;e<s.length;e++){var t=s[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(l,t.key,t)}}function O(l,s,e){return s&&w(l.prototype,s),e&&w(l,e),Object.defineProperty(l,"prototype",{writable:!1}),l}var y=function(){function l(s,e){if(g(this,l),!s)throw new Error("The request handler name is not specified.");if(!s.match(/^(?:\w+\:{2})?on*/))throw new Error('Invalid handler name. The correct handler name format is: "onEvent".');if(typeof FormData>"u")throw new Error("The browser does not support the FormData interface.");this.options=e,this.handler=s}return O(l,[{key:"getRequestOptions",value:function(){return{method:"POST",url:this.options.url?this.options.url:window.location.href,headers:this.buildHeaders(),responseType:this.options.download===!1?"":"blob"}}},{key:"buildHeaders",value:function(){var e=this.handler,t=this.options,a={"X-Requested-With":"XMLHttpRequest","X-OCTOBER-REQUEST-HANDLER":e};t.files||(a["Content-Type"]=t.bulk?"application/json":"application/x-www-form-urlencoded"),t.flash&&(a["X-OCTOBER-REQUEST-FLASH"]=1),t.partial&&(a["X-OCTOBER-REQUEST-PARTIAL"]=t.partial);var r=this.extractPartials(t.update,t.partial);r&&(a["X-OCTOBER-REQUEST-PARTIALS"]=r);var n=this.getXSRFToken();n&&(a["X-XSRF-TOKEN"]=n);var i=this.getCSRFToken();return i&&(a["X-CSRF-TOKEN"]=i),t.headers&&t.headers.constructor==={}.constructor&&Object.assign(a,t.headers),a}},{key:"extractPartials",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=[];if(e){if(j(e)!=="object")throw new Error("Invalid update value. The correct format is an object ({...})");for(var r in e)r==="_self"&&t?a.push(t):a.push(r)}return a.join("&")}},{key:"getCSRFToken",value:function(){var e=document.querySelector('meta[name="csrf-token"]');return e?e.getAttribute("content"):null}},{key:"getXSRFToken",value:function(){var e=null;if(document.cookie&&document.cookie!="")for(var t=document.cookie.split(";"),a=0;a<t.length;a++){var r=t[a].replace(/^([\s]*)|([\s]*)$/g,"");if(r.substring(0,11)=="XSRF-TOKEN="){e=decodeURIComponent(r.substring(11));break}}return e}}],[{key:"fetch",value:function(e,t){return new this(e,t).getRequestOptions()}}]),l}()},"./src/request/request.js":(P,v,d)=>{d.r(v),d.d(v,{Request:()=>o});var j=d("./src/request/options.js"),g=d("./src/request/actions.js"),w=d("./src/request/data.js"),O=d("./src/util/http-request.js"),y=d("./src/util/deferred.js"),l=d("./src/extras/progress-bar.js"),s=d("./src/util/index.js");function e(u,f){var c=Object.keys(u);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(u);f&&(h=h.filter(function(E){return Object.getOwnPropertyDescriptor(u,E).enumerable})),c.push.apply(c,h)}return c}function t(u){for(var f=1;f<arguments.length;f++){var c=arguments[f]!=null?arguments[f]:{};f%2?e(Object(c),!0).forEach(function(h){a(u,h,c[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(c)):e(Object(c)).forEach(function(h){Object.defineProperty(u,h,Object.getOwnPropertyDescriptor(c,h))})}return u}function a(u,f,c){return f in u?Object.defineProperty(u,f,{value:c,enumerable:!0,configurable:!0,writable:!0}):u[f]=c,u}function r(u,f){if(!(u instanceof f))throw new TypeError("Cannot call a class as a function")}function n(u,f){for(var c=0;c<f.length;c++){var h=f[c];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(u,h.key,h)}}function i(u,f,c){return f&&n(u.prototype,f),c&&n(u,c),Object.defineProperty(u,"prototype",{writable:!1}),u}var o=function(){function u(f,c,h){var E=this;r(this,u),this.el=f,this.handler=c,this.options=t(t({},this.constructor.DEFAULTS),h||{}),this.context={el:f,handler:c,options:this.options},this.progressBar=new l.ProgressBar,this.showProgressBar=function(){E.progressBar.show({cssClass:"is-ajax"})}}return i(u,[{key:"start",value:function(){if(this.notifyApplicationAjaxSetup(),this.initOtherElements(),this.preprocessOptions(),this.actions=new g.Actions(this,this.context,this.options),!(!this.validateClientSideForm()||!this.applicationAllowsRequest())){var c=new w.Data(this.options.data,this.el,this.formEl),h;this.options.files?h=c.getAsFormData():this.options.bulk?h=c.getAsJsonData():h=c.getAsQueryString(),this.options.query&&this.actions.invoke("applyQueryToUrl",[this.options.query]);var E=j.Options.fetch(this.handler,this.options),p=E.url,k=E.headers,m=E.method,b=E.responseType;if(this.request=new O.HttpRequest(this,p,{method:m,headers:k,responseType:b,data:h,trackAbort:!0}),this.promise=new y.Deferred({delegate:this.request}),this.isRedirect=this.options.redirect&&this.options.redirect.length>0,!(this.options.confirm&&!this.actions.invoke("handleConfirmMessage",[this.options.confirm])))return this.sendInternal(),this.promise}}},{key:"sendInternal",value:function(){var c=this;this.notifyApplicationBeforeSend(),this.notifyApplicationAjaxPromise(),this.promise.fail(function(h,E,p){c.isRedirect||c.notifyApplicationAjaxFail(h,E,p)}).done(function(h,E,p){c.isRedirect||c.notifyApplicationAjaxDone(h,E,p)}).always(function(h,E,p){c.notifyApplicationAjaxAlways(h,E,p)}),this.request.send()}},{key:"toggleRedirect",value:function(c){c?(this.options.redirect=c,this.isRedirect=!0):(this.options.redirect=null,this.isRedirect=!1)}},{key:"applicationAllowsRequest",value:function(){var c=this.notifyApplicationBeforeRequest();return!c.defaultPrevented}},{key:"applicationAllowsUpdate",value:function(c,h,E){var p=this.notifyApplicationBeforeUpdate(c,h,E);return!p.defaultPrevented}},{key:"applicationAllowsError",value:function(c,h,E){var p=this.notifyApplicationRequestError(c,h,E);return!p.defaultPrevented}},{key:"notifyApplicationAjaxSetup",value:function(){return(0,s.dispatch)("ajax:setup",{target:this.el,detail:{context:this.context}})}},{key:"notifyApplicationAjaxPromise",value:function(){return(0,s.dispatch)("ajax:promise",{target:this.el,detail:{context:this.context}})}},{key:"notifyApplicationAjaxFail",value:function(c,h,E){return(0,s.dispatch)("ajax:fail",{target:this.el,detail:{context:this.context,data:c,responseCode:h,xhr:E}})}},{key:"notifyApplicationAjaxDone",value:function(c,h,E){return(0,s.dispatch)("ajax:done",{target:this.el,detail:{context:this.context,data:c,responseCode:h,xhr:E}})}},{key:"notifyApplicationAjaxAlways",value:function(c,h,E){return(0,s.dispatch)("ajax:always",{target:this.el,detail:{context:this.context,data:c,responseCode:h,xhr:E}})}},{key:"notifyApplicationAjaxUpdate",value:function(c,h,E,p){return(0,s.dispatch)("ajax:update",{target:c,detail:{context:this.context,data:h,responseCode:E,xhr:p}})}},{key:"notifyApplicationBeforeRedirect",value:function(){return(0,s.dispatch)("ajax:before-redirect",{target:this.el})}},{key:"notifyApplicationBeforeRequest",value:function(){return(0,s.dispatch)("ajax:before-request",{target:this.triggerEl,detail:{context:this.context}})}},{key:"notifyApplicationBeforeUpdate",value:function(c,h,E){return(0,s.dispatch)("ajax:before-update",{target:this.triggerEl,detail:{context:this.context,data:c,responseCode:h,xhr:E}})}},{key:"notifyApplicationRequestSuccess",value:function(c,h,E){return(0,s.dispatch)("ajax:request-success",{target:this.triggerEl,detail:{context:this.context,data:c,responseCode:h,xhr:E}})}},{key:"notifyApplicationRequestError",value:function(c,h,E){return(0,s.dispatch)("ajax:request-error",{target:this.triggerEl,detail:{context:this.context,message:c,responseCode:h,xhr:E}})}},{key:"notifyApplicationRequestComplete",value:function(c,h,E){return(0,s.dispatch)("ajax:request-complete",{target:this.triggerEl,detail:{context:this.context,data:c,responseCode:h,xhr:E}})}},{key:"notifyApplicationBeforeValidate",value:function(c,h){return(0,s.dispatch)("ajax:before-validate",{target:this.triggerEl,detail:{context:this.context,message:c,fields:h}})}},{key:"notifyApplicationBeforeReplace",value:function(c){return(0,s.dispatch)("ajax:before-replace",{target:c})}},{key:"notifyApplicationBeforeSend",value:function(){return(0,s.dispatch)("ajax:before-send",{target:window,detail:{context:this.context}})}},{key:"notifyApplicationUpdateComplete",value:function(c,h,E){return(0,s.dispatch)("ajax:update-complete",{target:window,detail:{context:this.context,data:c,responseCode:h,xhr:E}})}},{key:"notifyApplicationFieldInvalid",value:function(c,h,E,p){return(0,s.dispatch)("ajax:invalid-field",{target:window,detail:{element:c,fieldName:h,errorMsg:E,isFirst:p}})}},{key:"notifyApplicationConfirmMessage",value:function(c,h){return(0,s.dispatch)("ajax:confirm-message",{target:window,detail:{message:c,promise:h}})}},{key:"notifyApplicationErrorMessage",value:function(c){return(0,s.dispatch)("ajax:error-message",{target:window,detail:{message:c}})}},{key:"requestStarted",value:function(){this.markAsProgress(!0),this.toggleLoadingElement(!0),this.options.progressBar&&this.showProgressBarAfterDelay(),this.actions.invoke("start",[this.request.xhr])}},{key:"requestProgressed",value:function(c){this.promise.notify(c)}},{key:"requestCompletedWithResponse",value:function(c,h){this.actions.invoke("success",[c,h,this.request.xhr]),this.actions.invoke("complete",[c,h,this.request.xhr]),this.promise.resolve(c,h,this.request.xhr)}},{key:"requestFailedWithStatusCode",value:function(c,h){this.actions.invoke("error",[h,c,this.request.xhr]),this.actions.invoke("complete",[h,c,this.request.xhr]),this.promise.reject(h,c,this.request.xhr)}},{key:"requestFinished",value:function(){this.markAsProgress(!1),this.toggleLoadingElement(!1),this.options.progressBar&&this.hideProgressBar()}},{key:"initOtherElements",value:function(){typeof this.options.form=="string"?this.formEl=document.querySelector(this.options.form):this.options.form?this.formEl=this.options.form:this.formEl=this.el&&this.el!==document?this.el.closest("form"):null,this.triggerEl=this.formEl?this.formEl:this.el,this.partialEl=this.el&&this.el!==document?this.el.closest("[data-ajax-partial]"):null,this.loadingEl=typeof this.options.loading=="string"?document.querySelector(this.options.loading):this.options.loading}},{key:"preprocessOptions",value:function(){this.options.partial===void 0&&this.partialEl&&this.partialEl.dataset.ajaxPartial!==void 0&&(this.options.partial=this.partialEl.dataset.ajaxPartial||!0)}},{key:"validateClientSideForm",value:function(){return this.options.browserValidate&&typeof document.createElement("input").reportValidity=="function"&&this.formEl&&!this.formEl.checkValidity()?(this.formEl.reportValidity(),!1):!0}},{key:"toggleLoadingElement",value:function(c){if(this.loadingEl){if(typeof this.loadingEl.show!="function"||typeof this.loadingEl.hide!="function"){this.loadingEl.style.display=c?"block":"none";return}c?this.loadingEl.show():this.loadingEl.hide()}}},{key:"showProgressBarAfterDelay",value:function(){this.progressBar.setValue(0),this.progressBarTimeout=window.setTimeout(this.showProgressBar,this.options.progressBarDelay)}},{key:"hideProgressBar",value:function(){this.progressBar.setValue(100),this.progressBar.hide(),this.progressBarTimeout!=null&&(window.clearTimeout(this.progressBarTimeout),delete this.progressBarTimeout)}},{key:"markAsProgress",value:function(c){c?(document.documentElement.setAttribute("data-ajax-progress",""),this.formEl&&this.formEl.setAttribute("data-ajax-progress",this.handler)):(document.documentElement.removeAttribute("data-ajax-progress"),this.formEl&&this.formEl.removeAttribute("data-ajax-progress"))}}],[{key:"DEFAULTS",get:function(){return{handler:null,update:{},files:!1,bulk:!1,download:!1,browserValidate:!1,browserTarget:null,progressBarDelay:500,progressBar:null}}},{key:"send",value:function(c,h){return new u(document,c,h).start()}},{key:"sendElement",value:function(c,h,E){return typeof c=="string"&&(c=document.querySelector(c)),new u(c,h,E).start()}}]),u}()},"./src/util/deferred.js":(P,v,d)=>{d.r(v),d.d(v,{Deferred:()=>y,DeferredState:()=>O});function j(l,s){if(!(l instanceof s))throw new TypeError("Cannot call a class as a function")}function g(l,s){for(var e=0;e<s.length;e++){var t=s[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(l,t.key,t)}}function w(l,s,e){return s&&g(l.prototype,s),e&&g(l,e),Object.defineProperty(l,"prototype",{writable:!1}),l}var O={pending:"pending",rejected:"rejected",resolved:"resolved"},y=function(){function l(s){j(this,l),this.options=s||{},this.stateStr=O.pending,this.successFuncs=[],this.failureFuncs=[],this.progressFuncs=[],this.resolveArgs=[],this.rejectArgs=[],this.progressArgs=[],this.isProgressNotified=!1}return w(l,[{key:"resolve",value:function(){return this.stateStr===O.pending&&(this.resolveArgs=arguments,this.callFunction.call(this,this.successFuncs,this.resolveArgs),this.stateStr=O.resolved),this}},{key:"reject",value:function(){return this.stateStr===O.pending&&(this.rejectArgs=arguments,this.callFunction.call(this,this.failureFuncs,this.rejectArgs),this.stateStr=O.rejected),this}},{key:"notify",value:function(){return this.stateStr===O.pending&&(this.progressArgs=arguments,this.callFunction.call(this,this.progressFuncs,this.progressArgs),this.isProgressNotified=!0),this}},{key:"abort",value:function(){this.options.delegate&&this.options.delegate.abort()}},{key:"done",value:function(){var e=Array.prototype.slice.call(arguments);return this.successFuncs=this.successFuncs.concat(e),this.stateStr===O.resolved&&this.callFunction.call(this,e,this.resolveArgs),this}},{key:"fail",value:function(){var e=Array.prototype.slice.call(arguments);return this.failureFuncs=this.failureFuncs.concat(e),this.stateStr===O.rejected&&this.callFunction.call(this,e,this.rejectArgs),this}},{key:"progress",value:function(){var e=Array.prototype.slice.call(arguments);return this.progressFuncs=this.progressFuncs.concat(e),this.stateStr===O.pending&&this.isProgressNotified&&this.callFunction.call(this,e,this.progressArgs),this}},{key:"always",value:function(){var e=Array.prototype.slice.call(arguments);return this.successFuncs=this.successFuncs.concat(e),this.failureFuncs=this.failureFuncs.concat(e),this.stateStr!==O.pending&&this.callFunction.call(this,e,this.resolveArgs||this.rejectArgs),this}},{key:"then",value:function(){var e=[];for(var t in arguments){var a;Array.isArray(arguments[t])?a=arguments[t]:a=[arguments[t]],e.push(a)}return this.done.apply(this,e[0]),this.fail.apply(this,e[1]),this.progress.apply(this,e[2]),this}},{key:"promise",value:function(){var e=["resolve","reject","promise","notify"],t={};for(var a in this)e.indexOf(a)===-1&&(t[a]=this[a]);return t}},{key:"state",value:function(){return arguments.length>0&&(stateStr=arguments[0]),stateStr}},{key:"callFunction",value:function(e,t,a){a=a||{};var r=a.scope||this;for(var n in e){var i=e[n];typeof i=="function"&&i.apply(r,t)}}}]),l}()},"./src/util/events.js":(P,v,d)=>{d.r(v),d.d(v,{Events:()=>E});var j=d("./src/util/index.js");function g(A,x){var T=typeof Symbol<"u"&&A[Symbol.iterator]||A["@@iterator"];if(!T){if(Array.isArray(A)||(T=y(A))||x&&A&&typeof A.length=="number"){T&&(A=T);var S=0,D=function(){};return{s:D,n:function(){return S>=A.length?{done:!0}:{done:!1,value:A[S++]}},e:function(U){throw U},f:D}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var M=!0,F=!1,I;return{s:function(){T=T.call(A)},n:function(){var U=T.next();return M=U.done,U},e:function(U){F=!0,I=U},f:function(){try{!M&&T.return!=null&&T.return()}finally{if(F)throw I}}}}function w(A,x){return e(A)||s(A,x)||y(A,x)||O()}function O(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function y(A,x){if(A){if(typeof A=="string")return l(A,x);var T=Object.prototype.toString.call(A).slice(8,-1);if(T==="Object"&&A.constructor&&(T=A.constructor.name),T==="Map"||T==="Set")return Array.from(A);if(T==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(T))return l(A,x)}}function l(A,x){(x==null||x>A.length)&&(x=A.length);for(var T=0,S=new Array(x);T<x;T++)S[T]=A[T];return S}function s(A,x){var T=A==null?null:typeof Symbol<"u"&&A[Symbol.iterator]||A["@@iterator"];if(T!=null){var S=[],D=!0,M=!1,F,I;try{for(T=T.call(A);!(D=(F=T.next()).done)&&(S.push(F.value),!(x&&S.length===x));D=!0);}catch(L){M=!0,I=L}finally{try{!D&&T.return!=null&&T.return()}finally{if(M)throw I}}return S}}function e(A){if(Array.isArray(A))return A}function t(A,x){if(!(A instanceof x))throw new TypeError("Cannot call a class as a function")}function a(A,x){for(var T=0;T<x.length;T++){var S=x[T];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(A,S.key,S)}}function r(A,x,T){return x&&a(A.prototype,x),T&&a(A,T),Object.defineProperty(A,"prototype",{writable:!1}),A}var n=/[^.]*(?=\..*)\.|.*/,i=/\..*/,o=/::\d+$/,u={},f=1,c={mouseenter:"mouseover",mouseleave:"mouseout"},h=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]),E=function(){function A(){t(this,A)}return r(A,null,[{key:"on",value:function(T,S,D,M){R(T,S,D,M,!1)}},{key:"one",value:function(T,S,D,M){R(T,S,D,M,!0)}},{key:"off",value:function(T,S,D,M){if(!(typeof S!="string"||!T)){var F=b(S,D,M),I=w(F,3),L=I[0],U=I[1],J=I[2],G=J!==S,H=k(T),Q=H[J]||{},Z=S.startsWith(".");if(typeof U<"u"){if(!Q)return;C(T,H,J,U,L?D:null);return}if(Z)for(var N=0,ee=Object.keys(H);N<ee.length;N++){var te=ee[N];X(T,H,te,S.slice(1))}for(var W=0,re=Object.keys(Q);W<re.length;W++){var ae=re[W],oe=ae.replace(o,"");if(!G||S.includes(oe)){var ie=Q[ae];C(T,H,J,ie.callable,ie.delegationSelector)}}}}},{key:"dispatch",value:function(T){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},D=S.target,M=S.detail,F=S.cancelable,I=F===void 0?!0:F;return(0,j.dispatch)(T,{target:D,detail:M,cancelable:I})}}]),A}();function p(A,x){return x&&"".concat(x,"::").concat(f++)||A.uidEvent||f++}function k(A){var x=p(A);return A.uidEvent=x,u[x]=u[x]||{},u[x]}function m(A,x){var T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;return Object.values(A).find(function(S){return S.callable===x&&S.delegationSelector===T})}function b(A,x,T){var S=typeof x=="string",D=S?T:x,M=q(A);return h.has(M)||(M=A),[S,D,M]}function R(A,x,T,S,D){if(!(typeof x!="string"||!A)){var M=b(x,T,S),F=w(M,3),I=F[0],L=F[1],U=F[2];if(x in c){var J=function(te){return function(W){if(!W.relatedTarget||W.relatedTarget!==W.delegateTarget&&!W.delegateTarget.contains(W.relatedTarget))return te.call(this,W)}};L=J(L)}var G=k(A),H=G[U]||(G[U]={}),Q=m(H,L,I?T:null);if(Q){Q.oneOff=Q.oneOff&&D;return}var Z=p(L,x.replace(n,"")),N=I?B(A,T,L):_(A,L);N.delegationSelector=I?T:null,N.callable=L,N.oneOff=D,N.uidEvent=Z,H[Z]=N,A.addEventListener(U,N)}}function C(A,x,T,S,D){var M=m(x[T],S,D);M&&(A.removeEventListener(T,M),delete x[T][M.uidEvent])}function _(A,x){return function T(S){return S.delegateTarget=A,T.oneOff&&E.off(A,S.type,x),x.apply(A,[S])}}function B(A,x,T){return function S(D){for(var M=A.querySelectorAll(x),F=D.target;F&&F!==this;F=F.parentNode){var I=g(M),L;try{for(I.s();!(L=I.n()).done;){var U=L.value;if(U===F)return D.delegateTarget=F,S.oneOff&&E.off(A,D.type,x,T),T.apply(F,[D])}}catch(J){I.e(J)}finally{I.f()}}}}function X(A,x,T,S){for(var D=x[T]||{},M=0,F=Object.keys(D);M<F.length;M++){var I=F[M];if(I.includes(S)){var L=D[I];C(A,x,T,L.callable,L.delegationSelector)}}}function q(A){return A=A.replace(i,""),c[A]||A}},"./src/util/form-serializer.js":(P,v,d)=>{d.r(v),d.d(v,{FormSerializer:()=>O});function j(y,l){if(!(y instanceof l))throw new TypeError("Cannot call a class as a function")}function g(y,l){for(var s=0;s<l.length;s++){var e=l[s];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(y,e.key,e)}}function w(y,l,s){return l&&g(y.prototype,l),s&&g(y,s),Object.defineProperty(y,"prototype",{writable:!1}),y}var O=function(){function y(){j(this,y)}return w(y,[{key:"parseContainer",value:function(s){var e=this,t={};return s.querySelectorAll("input, select").forEach(function(a){e.assignObjectInternal(t,a.name,a.value)}),t}},{key:"assignObjectInternal",value:function(s,e,t){this.assignObjectNested(s,this.nameToArray(e),t)}},{key:"assignObjectNested",value:function(s,e,t){var a=s,r=e.length-1;e.forEach(function(n,i){a[n]===void 0&&(a[n]={}),i===r&&(a[n]=t),a=a[n]})}},{key:"nameToArray",value:function(s){for(var e=/([^\]\[]+)/g,t=[],a;a=e.exec(s);)t.push(a[0]);return t}}],[{key:"assignToObj",value:function(s,e,t){new y().assignObjectInternal(s,e,t)}},{key:"serializeJSON",value:function(s){return new y().parseContainer(s)}}]),y}()},"./src/util/http-request.js":(P,v,d)=>{d.r(v),d.d(v,{HttpRequest:()=>l,SystemStatusCode:()=>y});var j=d("./src/util/events.js");function g(a,r){if(!(a instanceof r))throw new TypeError("Cannot call a class as a function")}function w(a,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(a,i.key,i)}}function O(a,r,n){return r&&w(a.prototype,r),n&&w(a,n),Object.defineProperty(a,"prototype",{writable:!1}),a}var y={networkFailure:0,timeoutFailure:-1,contentTypeMismatch:-2,userAborted:-3},l=function(){function a(r,n,i){var o=this;g(this,a),this.failed=!1,this.progress=0,this.sent=!1,this.delegate=r,this.url=n,this.options=i,this.headers=i.headers||{},this.method=i.method||"GET",this.responseType=i.responseType||"",this.data=i.data,this.timeout=i.timeout||0,this.requestProgressed=function(u){u.lengthComputable&&o.setProgress(u.loaded/u.total)},this.requestLoaded=function(){o.endRequest(function(u){o.processResponseData(u,function(f,c){var h=f.getResponseHeader("Content-Type"),E=t(h)?JSON.parse(c):c;if(o.options.htmlOnly&&!e(h)){o.failed=!0,o.delegate.requestFailedWithStatusCode(y.contentTypeMismatch);return}f.status>=200&&f.status<300?o.delegate.requestCompletedWithResponse(E,f.status,s(f,o.url)):(o.failed=!0,o.delegate.requestFailedWithStatusCode(f.status,E))})})},this.requestFailed=function(){o.endRequest(function(){o.failed=!0,o.delegate.requestFailedWithStatusCode(y.networkFailure)})},this.requestTimedOut=function(){o.endRequest(function(){o.failed=!0,o.delegate.requestFailedWithStatusCode(y.timeoutFailure)})},this.requestCanceled=function(){o.options.trackAbort?o.endRequest(function(){o.failed=!0,o.delegate.requestFailedWithStatusCode(y.userAborted)}):o.endRequest()},this.createXHR()}return O(a,[{key:"send",value:function(){this.xhr&&!this.sent&&(this.notifyApplicationBeforeRequestStart(),this.setProgress(0),this.xhr.send(this.data||null),this.sent=!0,this.delegate.requestStarted())}},{key:"abort",value:function(){this.xhr&&this.sent&&this.xhr.abort()}},{key:"notifyApplicationBeforeRequestStart",value:function(){j.Events.dispatch("ajax:request-start",{detail:{url:this.url,xhr:this.xhr},cancelable:!1})}},{key:"notifyApplicationAfterRequestEnd",value:function(){j.Events.dispatch("ajax:request-end",{detail:{url:this.url,xhr:this.xhr},cancelable:!1})}},{key:"createXHR",value:function(){var n=this.xhr=new XMLHttpRequest;n.open(this.method,this.url,!0),n.responseType=this.responseType,n.onprogress=this.requestProgressed,n.onload=this.requestLoaded,n.onerror=this.requestFailed,n.ontimeout=this.requestTimedOut,n.onabort=this.requestCanceled,this.timeout&&(n.timeout=this.timeout*1e3);for(var i in this.headers)n.setRequestHeader(i,this.headers[i]);return n}},{key:"endRequest",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){};this.xhr&&(this.notifyApplicationAfterRequestEnd(),n(this.xhr),this.destroy())}},{key:"setProgress",value:function(n){this.progress=n,this.delegate.requestProgressed(n)}},{key:"destroy",value:function(){this.setProgress(1),this.delegate.requestFinished()}},{key:"processResponseData",value:function(n,i){if(this.responseType!=="blob"){i(n,n.responseText);return}var o=n.getResponseHeader("Content-Disposition")||"";if(o.indexOf("attachment")===0||o.indexOf("inline")===0){i(n,n.response);return}var u=new FileReader;u.addEventListener("load",function(){i(n,u.result)}),u.readAsText(n.response)}}]),a}();function s(a,r){if(a.getResponseHeader("X-OCTOBER-LOCATION"))return a.getResponseHeader("X-OCTOBER-LOCATION");var n=r.match(/^(.*)#/),i=n?n[1]:r;return i!==a.responseURL?a.responseURL:null}function e(a){return(a||"").match(/^text\/html|^application\/xhtml\+xml/)}function t(a){return(a||"").includes("application/json")}},"./src/util/index.js":(P,v,d)=>{d.r(v),d.d(v,{array:()=>l,defer:()=>g,dispatch:()=>j,unindent:()=>w,uuid:()=>s});function j(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=t.target,r=t.detail,n=t.cancelable,i=n===void 0?!0:n,o=new CustomEvent(e,{bubbles:!0,cancelable:i===!0,detail:r||{}});return(a||document).dispatchEvent(o),o}function g(e){setTimeout(e,1)}function w(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),r=1;r<t;r++)a[r-1]=arguments[r];var n=O(y(e,a)).split(`
`),i=n[0].match(/^\s+/),o=i?i[0].length:0;return n.map(function(u){return u.slice(o)}).join(`
`)}function O(e){return e.replace(/^\n/,"")}function y(e,t){return e.reduce(function(a,r,n){var i=t[n]==null?"":t[n];return a+r+i},"")}function l(e){return Array.prototype.slice.call(e)}function s(){return Array.apply(null,{length:36}).map(function(e,t){return t==8||t==13||t==18||t==23?"-":t==14?"4":t==19?(Math.floor(Math.random()*4)+8).toString(16):Math.floor(Math.random()*15).toString(16)}).join("")}},"./src/util/json-parser.js":(P,v,d)=>{d.r(v),d.d(v,{JsonParser:()=>y});function j(l){return j=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},j(l)}function g(l,s){if(!(l instanceof s))throw new TypeError("Cannot call a class as a function")}function w(l,s){for(var e=0;e<s.length;e++){var t=s[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(l,t.key,t)}}function O(l,s,e){return s&&w(l.prototype,s),e&&w(l,e),Object.defineProperty(l,"prototype",{writable:!1}),l}var y=function(){function l(){g(this,l)}return O(l,[{key:"parseString",value:function(e){if(e=e.trim(),!e.length)throw new Error("Broken JSON object.");for(var t="";e&&e[0]===",";)e=e.substr(1);if(e[0]==='"'||e[0]==="'"){if(e[e.length-1]!==e[0])throw new Error("Invalid string JSON object.");for(var a='"',r=1;r<e.length;r++)if(e[r]==="\\")e[r+1]==="'"||(a+=e[r]),a+=e[r+1],r++;else{if(e[r]===e[0])return a+='"',a;e[r]==='"'?a+='\\"':a+=e[r]}throw new Error("Invalid string JSON object.")}if(e==="true"||e==="false")return e;if(e==="null")return"null";var n=parseFloat(e);if(!isNaN(n))return n.toString();if(e[0]==="{"){for(var i="needKey",t="{",r=1;r<e.length;r++)if(!this.isBlankChar(e[r])){if(i==="needKey"&&(e[r]==='"'||e[r]==="'")){var o=this.parseKey(e,r+1,e[r]);t+='"'+o+'"',r+=o.length,r+=1,i="afterKey"}else if(i==="needKey"&&this.canBeKeyHead(e[r])){var o=this.parseKey(e,r);t+='"',t+=o,t+='"',r+=o.length-1,i="afterKey"}else if(i==="afterKey"&&e[r]===":")t+=":",i=":";else if(i===":"){var a=this.getBody(e,r);r=r+a.originLength-1,t+=this.parseString(a.body),i="afterBody"}else if(i==="afterBody"||i==="needKey"){for(var u=r;e[u]===","||this.isBlankChar(e[u]);)u++;if(e[u]==="}"&&u===e.length-1){for(;t[t.length-1]===",";)t=t.substr(0,t.length-1);return t+="}",t}else u!==r&&t!=="{"&&(t+=",",i="needKey",r=u-1)}}throw new Error("Broken JSON object near "+t)}if(e[0]==="["){for(var t="[",i="needBody",r=1;r<e.length;r++)if(!(e[r]===" "||e[r]===`
`||e[r]==="	")){if(i==="needBody"){if(e[r]===","){t+="null,";continue}if(e[r]==="]"&&r===e.length-1)return t[t.length-1]===","&&(t=t.substr(0,t.length-1)),t+="]",t;var a=this.getBody(e,r);r=r+a.originLength-1,t+=this.parseString(a.body),i="afterBody"}else if(i==="afterBody"){if(e[r]===",")for(t+=",",i="needBody";e[r+1]===","||this.isBlankChar(e[r+1]);)e[r+1]===","&&(t+="null,"),r++;else if(e[r]==="]"&&r===e.length-1)return t+="]",t}}throw new Error("Broken JSON array near "+t)}}},{key:"parseKey",value:function(e,t,a){for(var r="",n=t;n<e.length;n++){if(a&&a===e[n])return r;if(!a&&(e[n]===" "||e[n]===":"))return r;r+=e[n],e[n]==="\\"&&n+1<e.length&&(r+=e[n+1],n++)}throw new Error("Broken JSON syntax near "+r)}},{key:"getBody",value:function(e,t){if(e[t]==='"'||e[t]==="'"){for(var a=e[t],r=t+1;r<e.length;r++)if(e[r]==="\\")a+=e[r],r+1<e.length&&(a+=e[r+1]),r++;else{if(e[r]===e[t])return a+=e[t],{originLength:a.length,body:a};a+=e[r]}throw new Error("Broken JSON string body near "+a)}if(e[t]==="t"){if(e.indexOf("true",t)===t)return{originLength:4,body:"true"};throw new Error("Broken JSON boolean body near "+e.substr(0,t+10))}if(e[t]==="f"){if(e.indexOf("f",t)===t)return{originLength:5,body:"false"};throw new Error("Broken JSON boolean body near "+e.substr(0,t+10))}if(e[t]==="n"){if(e.indexOf("null",t)===t)return{originLength:4,body:"null"};throw new Error("Broken JSON boolean body near "+e.substr(0,t+10))}if(e[t]==="-"||e[t]==="+"||e[t]==="."||e[t]>="0"&&e[t]<="9"){for(var a="",r=t;r<e.length;r++)if(e[r]==="-"||e[r]==="+"||e[r]==="."||e[r]>="0"&&e[r]<="9")a+=e[r];else return{originLength:a.length,body:a};throw new Error("Broken JSON number body near "+a)}if(e[t]==="{"||e[t]==="["){for(var n=[e[t]],a=e[t],r=t+1;r<e.length;r++){if(a+=e[r],e[r]==="\\")r+1<e.length&&(a+=e[r+1]),r++;else if(e[r]==='"')n[n.length-1]==='"'?n.pop():n[n.length-1]!=="'"&&n.push(e[r]);else if(e[r]==="'")n[n.length-1]==="'"?n.pop():n[n.length-1]!=='"'&&n.push(e[r]);else if(n[n.length-1]!=='"'&&n[n.length-1]!=="'"){if(e[r]==="{")n.push("{");else if(e[r]==="}")if(n[n.length-1]==="{")n.pop();else throw new Error("Broken JSON "+(e[t]==="{"?"object":"array")+" body near "+a);else if(e[r]==="[")n.push("[");else if(e[r]==="]")if(n[n.length-1]==="[")n.pop();else throw new Error("Broken JSON "+(e[t]==="{"?"object":"array")+" body near "+a)}if(!n.length)return{originLength:r-t,body:a}}throw new Error("Broken JSON "+(e[t]==="{"?"object":"array")+" body near "+a)}throw new Error("Broken JSON body near "+e.substr(t-5>=0?t-5:0,50))}},{key:"canBeKeyHead",value:function(e){return e[0]==="\\"?!1:e[0]>="a"&&e[0]<="z"||e[0]>="A"&&e[0]<="Z"||e[0]==="_"||e[0]>="0"&&e[0]<="9"||e[0]==="$"||e.charCodeAt(0)>255}},{key:"isBlankChar",value:function(e){return e===" "||e===`
`||e==="	"}}],[{key:"paramToObj",value:function(e,t){if(t===void 0&&(t=""),j(t)==="object")return t;t.charAt(0)!=="{"&&(t="{"+t+"}");try{return this.parseJSON(t)}catch(a){throw new Error("Error parsing the "+e+" attribute value. "+a)}}},{key:"parseJSON",value:function(e){return JSON.parse(new l().parseString(e))}}]),l}()}},z={};function K(P){var v=z[P];if(v!==void 0)return v.exports;var d=z[P]={exports:{}};return ne[P](d,d.exports,K),d.exports}K.amdO={},K.d=(P,v)=>{for(var d in v)K.o(v,d)&&!K.o(P,d)&&Object.defineProperty(P,d,{enumerable:!0,get:v[d]})},K.o=(P,v)=>Object.prototype.hasOwnProperty.call(P,v),K.r=P=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(P,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(P,"__esModule",{value:!0})};var se={};(()=>{/*!**************************!*\
  !*** ./src/framework.js ***!
  \**************************/K.r(se),K("./src/request/index.js"),K("./src/core/index.js")})()})();(()=>{var ne={"./src/core/controller.js":(P,v,d)=>{d.r(v),d.d(v,{Controller:()=>l});var j=d("./src/util/events.js"),g=d("./src/core/request-builder.js");function w(s,e){if(!(s instanceof e))throw new TypeError("Cannot call a class as a function")}function O(s,e){for(var t=0;t<e.length;t++){var a=e[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(s,a.key,a)}}function y(s,e,t){return e&&O(s.prototype,e),t&&O(s,t),Object.defineProperty(s,"prototype",{writable:!1}),s}var l=function(){function s(){w(this,s),this.started=!1,this.documentVisible=!0}return y(s,[{key:"start",value:function(){var t=this;this.started||(window.onbeforeunload=this.documentOnBeforeUnload,addEventListener("DOMContentLoaded",function(){return t.render()}),addEventListener("page:updated",function(){return t.render()}),addEventListener("ajax:update-complete",function(){return t.render()}),addEventListener("visibilitychange",function(){return t.documentOnVisibilityChange()}),j.Events.on(document,"submit","[data-request]",this.documentOnSubmit),j.Events.on(document,"input","input[data-request][data-track-input]",this.documentOnKeyup),j.Events.on(document,"change","select[data-request], input[type=radio][data-request], input[type=checkbox][data-request], input[type=file][data-request]",this.documentOnChange),j.Events.on(document,"keydown","input[type=text][data-request], input[type=submit][data-request], input[type=password][data-request]",this.documentOnKeydown),j.Events.on(document,"click","a[data-request], button[data-request], input[type=button][data-request], input[type=submit][data-request]",this.documentOnClick),this.started=!0)}},{key:"stop",value:function(){this.started&&(this.started=!1)}},{key:"render",value:function(t){j.Events.dispatch("before-render"),j.Events.dispatch("render"),dispatchEvent(new Event("resize")),this.documentOnRender(t)}},{key:"documentOnVisibilityChange",value:function(t){this.documentVisible=!document.hidden,this.documentVisible&&this.documentOnRender()}},{key:"documentOnRender",value:function(t){this.documentVisible&&document.querySelectorAll("[data-auto-submit]").forEach(function(a){var r=a.dataset.autoSubmit||0;a.removeAttribute("data-auto-submit"),setTimeout(function(){g.RequestBuilder.fromElement(a)},r)})}},{key:"documentOnSubmit",value:function(t){t.preventDefault(),g.RequestBuilder.fromElement(t.target)}},{key:"documentOnClick",value:function(t){t.preventDefault(),g.RequestBuilder.fromElement(t.target)}},{key:"documentOnChange",value:function(t){g.RequestBuilder.fromElement(t.target)}},{key:"documentOnKeyup",value:function(t){var a=t.target,r=a.dataset.ocLastValue;if(["email","number","password","search","text"].indexOf(a.type)!==-1&&!(r!==void 0&&r==a.value)){a.dataset.ocLastValue=a.value,this.dataTrackInputTimer!==void 0&&clearTimeout(this.dataTrackInputTimer);var n=a.getAttribute("data-track-input");n||(n=300);var i=this;this.dataTrackInputTimer=setTimeout(function(){i.lastDataTrackInputRequest&&i.lastDataTrackInputRequest.abort(),i.lastDataTrackInputRequest=g.RequestBuilder.fromElement(a)},n)}}},{key:"documentOnKeydown",value:function(t){t.key==="Enter"&&(t.preventDefault(),this.dataTrackInputTimer!==void 0&&clearTimeout(this.dataTrackInputTimer),g.RequestBuilder.fromElement(t.target))}},{key:"documentOnBeforeUnload",value:function(t){window.ocUnloading=!0}}]),s}()},"./src/core/index.js":(P,v,d)=>{d.r(v),d.d(v,{default:()=>O});var j=d("./src/util/events.js"),g=d("./src/core/namespace.js");function w(s){return w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(s)}const O=g.default;window.oc||(window.oc={}),window.oc.AjaxFramework||(window.oc.AjaxFramework=g.default,window.oc.request=g.default.requestElement,window.oc.parseJSON=g.default.parseJSON,window.oc.serializeJSON=g.default.serializeJSON,window.oc.Events=j.Events,!y()&&!l()&&g.default.start());function y(){return typeof define=="function"&&d.amdO}function l(){return(typeof Y>"u"?"undefined":w(Y))=="object"&&!0}},"./src/core/migrate.js":(P,v,d)=>{d.r(v),d.d(v,{Migrate:()=>s});var j=d("./src/core/request-builder.js"),g=d("./src/util/json-parser.js");function w(e){return w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(e)}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,a){return t&&y(e.prototype,t),a&&y(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}var s=function(){function e(){O(this,e)}return l(e,[{key:"bind",value:function(){this.bindRequestFunc(),this.bindRenderFunc(),this.bindjQueryEvents()}},{key:"bindRequestFunc",value:function(){var a=$.fn.request;$.fn.request=function(r,n){var i=w(n)==="object"?n:{};return new j.RequestBuilder(this.get(0),r,i)},$.fn.request.Constructor=j.RequestBuilder,$.request=function(r,n){return $(document).request(r,n)},$.fn.request.noConflict=function(){return $.fn.request=a,this}}},{key:"bindRenderFunc",value:function(){$.fn.render=function(a){$(document).on("render",a)}}},{key:"bindjQueryEvents",value:function(){this.migratejQueryEvent(document,"ajax:setup","ajaxSetup",["context"]),this.migratejQueryEvent(document,"ajax:promise","ajaxPromise",["context"]),this.migratejQueryEvent(document,"ajax:fail","ajaxFail",["context","data","responseCode","xhr"]),this.migratejQueryEvent(document,"ajax:done","ajaxDone",["context","data","responseCode","xhr"]),this.migratejQueryEvent(document,"ajax:always","ajaxAlways",["context","data","responseCode","xhr"]),this.migratejQueryEvent(document,"ajax:before-redirect","ajaxRedirect"),this.migratejQueryEvent(document,"ajax:update","ajaxUpdate",["context","data","responseCode","xhr"]),this.migratejQueryEvent(document,"ajax:before-replace","ajaxBeforeReplace"),this.migratejQueryEvent(document,"ajax:before-request","oc.beforeRequest",["context"]),this.migratejQueryEvent(document,"ajax:before-update","ajaxBeforeUpdate",["context","data","responseCode","xhr"]),this.migratejQueryEvent(document,"ajax:request-success","ajaxSuccess",["context","data","responseCode","xhr"]),this.migratejQueryEvent(document,"ajax:request-complete","ajaxComplete",["context","data","responseCode","xhr"]),this.migratejQueryEvent(document,"ajax:request-error","ajaxError",["context","message","responseCode","xhr"]),this.migratejQueryEvent(document,"ajax:before-validate","ajaxValidation",["context","message","fields"]),this.migratejQueryEvent(window,"ajax:before-send","ajaxBeforeSend",["context"]),this.migratejQueryEvent(window,"ajax:update-complete","ajaxUpdateComplete",["context","data","responseCode","xhr"]),this.migratejQueryEvent(window,"ajax:invalid-field","ajaxInvalidField",["element","fieldName","errorMsg","isFirst"]),this.migratejQueryEvent(window,"ajax:confirm-message","ajaxConfirmMessage",["message","promise"]),this.migratejQueryEvent(window,"ajax:error-message","ajaxErrorMessage",["message"]),this.migratejQueryAttachData(document,"ajax:setup","a[data-request], button[data-request], form[data-request], a[data-handler], button[data-handler]")}},{key:"migratejQueryEvent",value:function(a,r,n){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[],o=this;$(a).on(r,function(u){o.triggerjQueryEvent(u.originalEvent,n,i)})}},{key:"triggerjQueryEvent",value:function(a,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],i=$.Event(r),o=this.buildDetailArgs(a,n);$(a.target).trigger(i,o),i.isDefaultPrevented()&&a.preventDefault()}},{key:"buildDetailArgs",value:function(a,r){var n=[];return r.forEach(function(i){n.push(a.detail[i])}),n}},{key:"migratejQueryAttachData",value:function(a,r,n){$(a).on(r,n,function(i){var o=$(this).data("request-data");if(o){var u=i.detail.context.options;o.constructor==={}.constructor?Object.assign(u.data,o):typeof o=="string"&&Object.assign(u.data,g.JsonParser.paramToObj("request-data",o))}})}}]),e}()},"./src/core/namespace.js":(P,v,d)=>{d.r(v),d.d(v,{default:()=>s});var j=d("./src/core/controller.js"),g=d("./src/core/migrate.js"),w=d("./src/core/request-builder.js"),O=d("./src/util/json-parser.js"),y=d("./src/util/form-serializer.js"),l=new j.Controller;const s={controller:l,parseJSON:O.JsonParser.parseJSON,serializeJSON:y.FormSerializer.serializeJSON,requestElement:w.RequestBuilder.fromElement,start:function(){l.start(),window.jQuery&&new g.Migrate().bind()},stop:function(){l.stop()}}},"./src/core/request-builder.js":(P,v,d)=>{d.r(v),d.d(v,{RequestBuilder:()=>t});var j=d("./src/request/namespace.js"),g=d("./src/util/json-parser.js");function w(n,i){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(n);i&&(u=u.filter(function(f){return Object.getOwnPropertyDescriptor(n,f).enumerable})),o.push.apply(o,u)}return o}function O(n){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?w(Object(o),!0).forEach(function(u){y(n,u,o[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):w(Object(o)).forEach(function(u){Object.defineProperty(n,u,Object.getOwnPropertyDescriptor(o,u))})}return n}function y(n,i,o){return i in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o,n}function l(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")}function s(n,i){for(var o=0;o<i.length;o++){var u=i[o];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function e(n,i,o){return i&&s(n.prototype,i),o&&s(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n}var t=function(){function n(i,o,u){return l(this,n),this.options=u||{},this.ogElement=i,this.element=this.findElement(i),this.element?(this.assignAsEval("beforeUpdateFunc","requestBeforeUpdate"),this.assignAsEval("afterUpdateFunc","requestAfterUpdate"),this.assignAsEval("successFunc","requestSuccess"),this.assignAsEval("errorFunc","requestError"),this.assignAsEval("completeFunc","requestComplete"),this.assignAsData("progressBar","requestProgressBar"),this.assignAsData("confirm","requestConfirm"),this.assignAsData("redirect","requestRedirect"),this.assignAsData("loading","requestLoading"),this.assignAsData("form","requestForm"),this.assignAsData("url","requestUrl"),this.assignAsData("bulk","requestBulk",{emptyAsTrue:!0}),this.assignAsData("files","requestFiles",{emptyAsTrue:!0}),this.assignAsData("flash","requestFlash",{emptyAsTrue:!0}),this.assignAsData("download","requestDownload",{emptyAsTrue:!0}),this.assignAsData("update","requestUpdate",{parseJson:!0}),this.assignAsData("query","requestQuery",{parseJson:!0}),this.assignAsData("browserTarget","browserTarget"),this.assignAsData("browserValidate","browserValidate",{emptyAsTrue:!0}),this.assignAsMetaData("update","ajaxRequestUpdate",{parseJson:!0,mergeValue:!0}),this.assignRequestData(),o||(o=this.getHandlerName()),j.default.sendElement(this.element,o,this.options)):j.default.send(o,this.options)}return e(n,[{key:"findElement",value:function(o){if(!o||o===document)return null;if(o.matches("[data-request]"))return o;var u=o.closest("[data-request]");return u||o}},{key:"getHandlerName",value:function(){return this.element.dataset.dataRequest?this.element.dataset.dataRequest:this.element.getAttribute("data-request")}},{key:"assignAsEval",value:function(o,u){var f;this.element.dataset[u]?f=this.element.dataset[u]:f=this.element.getAttribute("data-"+r(u)),f&&(this.options[o]=function(c,h){return new Function("data",f).apply(c,[h])})}},{key:"assignAsData",value:function(o,u){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},c=f.parseJson,h=c===void 0?!1:c,E=f.emptyAsTrue,p=E===void 0?!1:E,k;this.element.dataset[u]?k=this.element.dataset[u]:k=this.element.getAttribute("data-"+r(u)),k!==null&&(h?this.options[o]=g.JsonParser.paramToObj("data-"+r(u),k):this.options[o]=this.castAttrToOption(k,p))}},{key:"assignAsMetaData",value:function(o,u){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},c=f.mergeValue,h=c===void 0?!0:c,E=f.parseJson,p=E===void 0?!1:E,k=f.emptyAsTrue,m=k===void 0?!1:k,b=document.documentElement.querySelector('head meta[name="'+r(u)+'"]');if(b){var R=b.getAttribute("content");p?R=g.JsonParser.paramToObj(r(u),R):R=this.castAttrToOption(R,m),h?this.options[o]=O(O({},this.options[o]),R):this.options[o]=R}}},{key:"castAttrToOption",value:function(o,u){return u&&o===""||o==="true"||o==="1"?!0:o==="false"||o==="0"?!1:o}},{key:"assignRequestData",value:function(){var o={};this.options.data&&Object.assign(o,this.options.data);var u=this.ogElement.getAttribute("data-request-data");u&&Object.assign(o,g.JsonParser.paramToObj("data-request-data",u)),a(this.ogElement,"[data-request-data]").reverse().forEach(function(f){Object.assign(o,g.JsonParser.paramToObj("data-request-data",f.getAttribute("data-request-data")))}),this.options.data=o}}],[{key:"fromElement",value:function(o,u,f){return typeof o=="string"&&(o=document.querySelector(o)),new n(o,u,f)}}]),n}();function a(n,i){var o=[];if(!n.parentNode)return o;for(var u=n.parentNode.closest(i);u;)o.push(u),u=u.parentNode.closest(i);return o}function r(n){return n.replace(/[A-Z]/g,function(i){return"-".concat(i.toLowerCase())})}},"./src/extras/attach-loader.js":(P,v,d)=>{d.r(v),d.d(v,{AttachLoader:()=>e});var j=d("./src/util/index.js"),g;function w(r,n){return n||(n=r.slice(0)),Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(n)}}))}function O(r,n){if(!(r instanceof n))throw new TypeError("Cannot call a class as a function")}function y(r,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(r,o.key,o)}}function l(r,n,i){return n&&y(r.prototype,n),i&&y(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r}function s(r,n,i){return n in r?Object.defineProperty(r,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[n]=i,r}var e=function(){function r(){O(this,r),this.stylesheetElement=this.createStylesheetElement()}return l(r,[{key:"show",value:function(i){if(this.installStylesheetElement(),t(i)){var o=document.createElement("span");o.className="oc-attach-loader is-inline",i.parentNode.insertBefore(o,i.nextSibling)}else i.classList.add("oc-attach-loader"),i.disabled=!0}},{key:"hide",value:function(i){t(i)?i.nextSibling.classList.contains("oc-attach-loader")&&i.nextSibling.remove():(i.classList.remove("oc-attach-loader"),i.disabled=!1)}},{key:"showForm",value:function(i){if(i.dataset.attachLoading!==void 0&&this.show(i),i.matches("form")){var o=this;i.querySelectorAll("[data-attach-loading]").forEach(function(u){t(u)||o.show(u)})}}},{key:"hideForm",value:function(i){if(i.dataset.attachLoading!==void 0&&this.hide(i),i.matches("form")){var o=this;i.querySelectorAll("[data-attach-loading]").forEach(function(u){t(u)||o.hide(u)})}}},{key:"installStylesheetElement",value:function(){r.stylesheetReady||(document.head.insertBefore(this.stylesheetElement,document.head.firstChild),r.stylesheetReady=!0)}},{key:"createStylesheetElement",value:function(){var i=document.createElement("style");return i.textContent=r.defaultCSS,i}}],[{key:"defaultCSS",get:function(){return(0,j.unindent)(g||(g=w([`
        .oc-attach-loader:after {
            content: '';
            display: inline-block;
            vertical-align: middle;
            margin-left: .4em;
            height: 1em;
            width: 1em;
            animation: oc-rotate-loader 0.8s infinite linear;
            border: .2em solid currentColor;
            border-right-color: transparent;
            border-radius: 50%;
            opacity: .5;
        }

        @keyframes oc-rotate-loader {
            0%    { transform: rotate(0deg); }
            100%  { transform: rotate(360deg); }
        }
    `])))}},{key:"attachLoader",get:function(){return{show:function(o){new r().show(a(o))},hide:function(o){new r().hide(a(o))}}}}]),r}();s(e,"stylesheetReady",!1);function t(r){return["input","select","textarea"].includes(r.tagName.toLowerCase())}function a(r){if(typeof r=="string"&&(r=document.querySelector(r)),!r)throw new Error("Invalid element for attach loader.");return r}},"./src/extras/controller.js":(P,v,d)=>{d.r(v),d.d(v,{Controller:()=>e});var j=d("./src/extras/validator.js"),g=d("./src/extras/attach-loader.js"),w=d("./src/extras/flash-message.js"),O=d("./src/util/events.js");function y(r,n){if(!(r instanceof n))throw new TypeError("Cannot call a class as a function")}function l(r,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(r,o.key,o)}}function s(r,n,i){return n&&l(r.prototype,n),i&&l(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r}var e=function(){function r(){y(this,r),this.started=!1,this.enableProgressBar=function(n){var i=n.detail.context.options;i.progressBar===null&&(i.progressBar=!0)},this.showAttachLoader=function(n){this.attachLoader.showForm(n.target)}.bind(this),this.hideAttachLoader=function(n){this.attachLoader.hideForm(n.target)}.bind(this),this.validatorSubmit=function(n){this.validator.submit(n.target)}.bind(this),this.validatorValidate=function(n){this.validator.validate(n.target,n.detail.fields,n.detail.message,t(n.detail.context.options.flash,"validate"))}.bind(this),this.flashMessageBind=function(n){var i=n.detail.context.options,o=this;i.flash&&(i.handleErrorMessage=function(u){(t(i.flash,"error")||t(i.flash,"validate"))&&o.flashMessage.show({message:u,type:"error"})},i.handleFlashMessage=function(u,f){t(i.flash,f)&&o.flashMessage.show({message:u,type:f})})}.bind(this),this.flashMessageRender=function(n){this.flashMessage.render()}.bind(this),this.handleBrowserRedirect=function(n){if(!n.defaultPrevented)if(oc.useTurbo&&oc.useTurbo()){var i=oc.AjaxTurbo.controller.getLastVisitUrl();i&&(n.preventDefault(),oc.visit(i))}else{var o=a();o&&(n.preventDefault(),location.assign(o))}}}return s(r,[{key:"start",value:function(){this.started||(addEventListener("ajax:setup",this.enableProgressBar),this.attachLoader=new g.AttachLoader,O.Events.on(document,"ajax:promise","form, [data-attach-loading]",this.showAttachLoader),O.Events.on(document,"ajax:fail","form, [data-attach-loading]",this.hideAttachLoader),O.Events.on(document,"ajax:done","form, [data-attach-loading]",this.hideAttachLoader),this.validator=new j.Validator,O.Events.on(document,"ajax:before-validate","[data-request-validate]",this.validatorValidate),O.Events.on(document,"ajax:promise","[data-request-validate]",this.validatorSubmit),this.flashMessage=new w.FlashMessage,addEventListener("render",this.flashMessageRender),addEventListener("ajax:setup",this.flashMessageBind),O.Events.on(document,"click","[data-browser-redirect-back]",this.handleBrowserRedirect),O.Events.on(document,"ajax:before-redirect","[data-browser-redirect-back]",this.handleBrowserRedirect),this.started=!0)}},{key:"stop",value:function(){this.started&&(removeEventListener("ajax:setup",this.enableProgressBar),this.attachLoader=null,O.Events.off(document,"ajax:promise","form, [data-attach-loading]",this.showAttachLoader),O.Events.off(document,"ajax:fail","form, [data-attach-loading]",this.hideAttachLoader),O.Events.off(document,"ajax:done","form, [data-attach-loading]",this.hideAttachLoader),this.validator=null,O.Events.off(document,"ajax:before-validate","[data-request-validate]",this.validatorValidate),O.Events.off(document,"ajax:promise","[data-request-validate]",this.validatorSubmit),this.flashMessage=null,removeEventListener("render",this.flashMessageRender),removeEventListener("ajax:setup",this.flashMessageBind),O.Events.off(document,"click","[data-browser-redirect-back]",this.handleBrowserRedirect),O.Events.off(document,"ajax:before-redirect","[data-browser-redirect-back]",this.handleBrowserRedirect),this.started=!1)}}]),r}();function t(r,n){if(r===!0&&n!=="validate")return!0;if(typeof r!="string")return!1;if(r==="*")return!0;var i=!1;return r.split(",").forEach(function(o){o.trim()===n&&(i=!0)}),i}function a(){if(!document.referrer)return null;try{var r=new URL(document.referrer);if(r.origin!==location.origin)return null;var n=localStorage.getItem("ocPushStateReferrer");return n&&n.indexOf(r.pathname)===0?n:document.referrer}catch{}}},"./src/extras/flash-message.js":(P,v,d)=>{d.r(v),d.d(v,{FlashMessage:()=>a});var j=d("./src/util/index.js"),g;function w(r,n){return n||(n=r.slice(0)),Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(n)}}))}function O(r,n){var i=Object.keys(r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);n&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable})),i.push.apply(i,o)}return i}function y(r){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?O(Object(i),!0).forEach(function(o){t(r,o,i[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):O(Object(i)).forEach(function(o){Object.defineProperty(r,o,Object.getOwnPropertyDescriptor(i,o))})}return r}function l(r,n){if(!(r instanceof n))throw new TypeError("Cannot call a class as a function")}function s(r,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(r,o.key,o)}}function e(r,n,i){return n&&s(r.prototype,n),i&&s(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r}function t(r,n,i){return n in r?Object.defineProperty(r,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[n]=i,r}var a=function(){function r(){l(this,r),this.stylesheetElement=this.createStylesheetElement()}return e(r,[{key:"show",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.installStylesheetElement();var o=i.message,u=o===void 0?"":o,f=i.type,c=f===void 0?"info":f,h=i.target,E=h===void 0?null:h,p=i.interval,k=p===void 0?5:p;i.text&&(u=i.text),i.class&&(c=i.class),E&&E.removeAttribute("data-control"),c==="error"&&this.deleteFlashMessages();var m=this.createFlashElement(u,c);document.body.appendChild(m),setTimeout(function(){m.classList.add("flash-show")},100),m.addEventListener("click",C),m.addEventListener("extras:flash-remove",R),m.querySelector(".flash-close").addEventListener("click",R);var b;k&&k!==0&&(b=setTimeout(R,k*1e3));function R(){clearInterval(b),m.removeEventListener("click",C),m.removeEventListener("extras:flash-remove",R),m.querySelector(".flash-close").removeEventListener("click",R),m.classList.remove("flash-show"),setTimeout(function(){m.remove()},1e3)}function C(){clearInterval(b)}}},{key:"render",value:function(){var i=this;document.querySelectorAll("[data-control=flash-message]").forEach(function(o){i.show(y(y({},o.dataset),{},{target:o,message:o.innerHTML})),o.remove()})}},{key:"deleteFlashMessages",value:function(){document.querySelectorAll(".oc-flash-message").forEach(function(i){i.dispatchEvent(new Event("extras:flash-remove"))})}},{key:"createFlashElement",value:function(i,o){var u=document.createElement("div");return u.className="oc-flash-message "+o,u.innerHTML="<span>"+i+'</span><a class="flash-close"></a>',u}},{key:"installStylesheetElement",value:function(){r.stylesheetReady||(document.head.insertBefore(this.stylesheetElement,document.head.firstChild),r.stylesheetReady=!0)}},{key:"createStylesheetElement",value:function(){var i=document.createElement("style");return i.textContent=r.defaultCSS,i}}],[{key:"defaultCSS",get:function(){return(0,j.unindent)(g||(g=w([`
        .oc-flash-message {
            position: fixed;
            z-index: 10300;
            width: 500px;
            left: 50%;
            top: 50px;
            margin-left: -250px;
            color: #fff;
            font-size: 1rem;
            padding: 10px 30px 10px 15px;
            border-radius: 5px;

            opacity: 0;
            transition: all 0.5s, width 0s;
            transform: scale(0.9);
        }
        .oc-flash-message.flash-show {
            opacity: 1;
            transform: scale(1);
        }
        .oc-flash-message.success {
            background: #86cB43;
        }
        .oc-flash-message.error {
            background: #cc3300;
        }
        .oc-flash-message.warning {
            background: #f0ad4e;
        }
        .oc-flash-message.info {
            background: #5fb6f5;
        }
        .oc-flash-message a.flash-close {
            box-sizing: content-box;
            width: 1em;
            height: 1em;
            padding: .25em .25em;
            background: transparent url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%23FFF'%3e%3cpath d='M.293.293a1 1 0 011.414 0L8 6.586 14.293.293a1 1 0 111.414 1.414L9.414 8l6.293 6.293a1 1 0 01-1.414 1.414L8 9.414l-6.293 6.293a1 1 0 01-1.414-1.414L6.586 8 .293 1.707a1 1 0 010-1.414z'/%3e%3c/svg%3e") center/1em auto no-repeat;
            border: 0;
            border-radius: .25rem;
            opacity: .5;
            text-decoration: none;
            position: absolute;
            right: .7rem;
            top: .7rem;
            cursor: pointer;
        }
        .oc-flash-message a.flash-close:hover,
        .oc-flash-message a.flash-close:focus {
            opacity: 1;
        }
        html[data-turbo-preview] .oc-flash-message {
            opacity: 0;
        }
        @media (max-width: 768px) {
            .oc-flash-message {
                left: 1rem;
                right: 1rem;
                top: 1rem;
                margin-left: 0;
                width: auto;
            }
        }
    `])))}},{key:"flashMsg",value:function(i){return new r().show(i)}}]),r}();t(a,"stylesheetReady",!1)},"./src/extras/index.js":(P,v,d)=>{d.r(v),d.d(v,{default:()=>w});var j=d("./src/extras/namespace.js");function g(l){return g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},g(l)}const w=j.default;window.oc||(window.oc={}),window.oc.AjaxExtras||(window.oc.AjaxExtras=j.default,window.oc.flashMsg=j.default.flashMsg,window.oc.progressBar=j.default.progressBar,window.oc.attachLoader=j.default.attachLoader,!O()&&!y()&&j.default.start());function O(){return typeof define=="function"&&d.amdO}function y(){return(typeof Y>"u"?"undefined":g(Y))=="object"&&!0}},"./src/extras/migrate.js":(P,v,d)=>{d.r(v),d.d(v,{Migrate:()=>O});function j(y,l){if(!(y instanceof l))throw new TypeError("Cannot call a class as a function")}function g(y,l){for(var s=0;s<l.length;s++){var e=l[s];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(y,e.key,e)}}function w(y,l,s){return l&&g(y.prototype,l),s&&g(y,s),Object.defineProperty(y,"prototype",{writable:!1}),y}var O=function(){function y(){j(this,y)}return w(y,[{key:"bind",value:function(){$.oc===void 0&&($.oc={}),$.oc.flashMsg=window.oc.flashMsg,$.oc.stripeLoadIndicator=window.oc.progressBar}}]),y}()},"./src/extras/namespace.js":(P,v,d)=>{d.r(v),d.d(v,{default:()=>s});var j=d("./src/extras/controller.js"),g=d("./src/extras/migrate.js"),w=d("./src/extras/flash-message.js"),O=d("./src/extras/progress-bar.js"),y=d("./src/extras/attach-loader.js"),l=new j.Controller;const s={controller:l,flashMsg:w.FlashMessage.flashMsg,progressBar:O.ProgressBar.progressBar,attachLoader:y.AttachLoader.attachLoader,start:function(){l.start(),window.jQuery&&new g.Migrate().bind()},stop:function(){l.stop()}}},"./src/extras/progress-bar.js":(P,v,d)=>{d.r(v),d.d(v,{ProgressBar:()=>e});var j=d("./src/util/index.js"),g;function w(a,r){return r||(r=a.slice(0)),Object.freeze(Object.defineProperties(a,{raw:{value:Object.freeze(r)}}))}function O(a,r){if(!(a instanceof r))throw new TypeError("Cannot call a class as a function")}function y(a,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(a,i.key,i)}}function l(a,r,n){return r&&y(a.prototype,r),n&&y(a,n),Object.defineProperty(a,"prototype",{writable:!1}),a}function s(a,r,n){return r in a?Object.defineProperty(a,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):a[r]=n,a}var e=function(){function a(){var r=this;O(this,a),this.stylesheetElement=this.createStylesheetElement(),this.progressElement=this.createProgressElement(),this.hiding=!1,this.value=0,this.visible=!1,this.trickle=function(){r.setValue(r.value+Math.random()/100)}}return l(a,[{key:"show",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};n.cssClass&&this.progressElement.classList.add(n.cssClass),this.visible||(this.visible=!0,this.installStylesheetElement(),this.installProgressElement(),this.startTrickling())}},{key:"hide",value:function(){var n=this;this.visible&&!this.hiding&&(this.hiding=!0,this.fadeProgressElement(function(){n.uninstallProgressElement(),n.stopTrickling(),n.visible=!1,n.hiding=!1}))}},{key:"setValue",value:function(n){this.value=n,this.refresh()}},{key:"installStylesheetElement",value:function(){a.stylesheetReady||(document.head.insertBefore(this.stylesheetElement,document.head.firstChild),a.stylesheetReady=!0)}},{key:"installProgressElement",value:function(){this.progressElement.style.width="0",this.progressElement.style.opacity="1",document.documentElement.insertBefore(this.progressElement,document.body),this.refresh()}},{key:"fadeProgressElement",value:function(n){this.progressElement.style.opacity="0",setTimeout(n,a.animationDuration*1.5)}},{key:"uninstallProgressElement",value:function(){this.progressElement.parentNode&&document.documentElement.removeChild(this.progressElement)}},{key:"startTrickling",value:function(){this.trickleInterval||(this.trickleInterval=setInterval(this.trickle,a.animationDuration))}},{key:"stopTrickling",value:function(){clearInterval(this.trickleInterval),delete this.trickleInterval}},{key:"refresh",value:function(){var n=this;requestAnimationFrame(function(){n.progressElement.style.width="".concat(10+n.value*90,"%")})}},{key:"createStylesheetElement",value:function(){var n=document.createElement("style");return n.textContent=a.defaultCSS,n}},{key:"createProgressElement",value:function(){var n=document.createElement("div");return n.className="oc-progress-bar",n}}],[{key:"defaultCSS",get:function(){return(0,j.unindent)(g||(g=w([`
        .oc-progress-bar {
            position: fixed;
            display: block;
            top: 0;
            left: 0;
            height: 3px;
            background: #0076ff;
            z-index: 9999;
            transition:
                width `,`ms ease-out,
                opacity `,"ms ",`ms ease-in;
            transform: translate3d(0, 0, 0);
        }
    `])),a.animationDuration,a.animationDuration/2,a.animationDuration/2)}},{key:"progressBar",get:function(){return{show:function(){var i=t();i.setValue(0),i.show()},hide:function(){var i=t();i.setValue(100),i.hide()}}}}]),a}();s(e,"instance",null),s(e,"stylesheetReady",!1),s(e,"animationDuration",300);function t(){return e.instance||(e.instance=new e),e.instance}},"./src/extras/validator.js":(P,v,d)=>{d.r(v),d.d(v,{Validator:()=>r});var j=d("./src/util/events.js");function g(n){return l(n)||y(n)||O(n)||w()}function w(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function O(n,i){if(n){if(typeof n=="string")return s(n,i);var o=Object.prototype.toString.call(n).slice(8,-1);if(o==="Object"&&n.constructor&&(o=n.constructor.name),o==="Map"||o==="Set")return Array.from(n);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return s(n,i)}}function y(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function l(n){if(Array.isArray(n))return s(n)}function s(n,i){(i==null||i>n.length)&&(i=n.length);for(var o=0,u=new Array(i);o<i;o++)u[o]=n[o];return u}function e(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")}function t(n,i){for(var o=0;o<i.length;o++){var u=i[o];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function a(n,i,o){return i&&t(n.prototype,i),o&&t(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n}var r=function(){function n(){e(this,n)}return a(n,[{key:"submit",value:function(o){var u=o.closest("form");u&&(u.querySelectorAll("[data-validate-for]").forEach(function(f){f.classList.remove("oc-visible")}),u.querySelectorAll("[data-validate-error]").forEach(function(f){f.classList.remove("oc-visible")}))}},{key:"validate",value:function(o,u,f,c){var h=o.closest("form"),E=[];if(h){for(var p in u){var k=u[p];E=[].concat(g(E),g(k));var m=h.querySelector('[data-validate-for="'+p+'"]');m&&((!m.innerHTML||m.dataset.emptyMode)&&(m.dataset.emptyMode=!0,m.innerHTML=k.join(", ")),m.classList.add("oc-visible"))}var b=h.querySelector("[data-validate-error]");if(b){b.classList.add("oc-visible");var R=b.querySelectorAll("[data-message]");if(R.length>0){var C=R[0];E.forEach(function(_){var B=C.cloneNode(!0);B.innerHTML=_,C.parentNode.insertBefore(B,C.nextSibling)}),R.forEach(function(_){_.remove()})}else b.innerHTML=f}c||j.Events.one(h,"ajax:request-error",function(_){_.preventDefault()})}}}]),n}()},"./src/observe/application.js":(P,v,d)=>{d.r(v),d.d(v,{Application:()=>l});var j=d("./src/observe/dispatcher.js"),g=d("./src/observe/container.js");function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t,a){return t&&O(e.prototype,t),a&&O(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}var l=function(){function e(){w(this,e),this.started=!1,this.element=document.documentElement,this.dispatcher=new j.Dispatcher(this),this.container=new g.Container(this)}return y(e,[{key:"startAsync",value:function(){var a=this;s().then(function(){a.start()})}},{key:"start",value:function(){this.started||(this.started=!0,this.dispatcher.start(),this.container.start())}},{key:"stop",value:function(){this.started&&(this.dispatcher.stop(),this.container.stop(),this.started=!1)}},{key:"register",value:function(a,r){this.load({identifier:a,controllerConstructor:r})}},{key:"fetch",value:function(a){return typeof a=="string"&&(a=document.querySelector(a)),a?this.getControlForElementAndIdentifier(a,a.dataset.control):null}},{key:"fetchAll",value:function(a){var r=this;typeof a=="string"&&(a=document.querySelectorAll(a));var n=[];return a.forEach(function(i){var o=r.fetch(i);o&&n.push(o)}),n}},{key:"load",value:function(a){for(var r=this,n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];var u=Array.isArray(a)?a:[a].concat(i);u.forEach(function(f){f.controllerConstructor.shouldLoad&&r.container.loadDefinition(f)})}},{key:"unload",value:function(a){for(var r=this,n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];var u=Array.isArray(a)?a:[a].concat(i);u.forEach(function(f){return r.container.unloadIdentifier(f)})}},{key:"controllers",get:function(){return this.container.contexts.map(function(a){return a.controller})}},{key:"getControlForElementAndIdentifier",value:function(a,r){var n=this.container.getContextForElementAndIdentifier(a,r);return n?n.controller:null}},{key:"handleError",value:function(a,r,n){var i;console.error(`%s

%o

%o`,r,a,n),(i=window.onerror)===null||i===void 0||i.call(window,r,"",0,0,a)}}]),e}();function s(){return new Promise(function(e){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",function(){return e()}):e()})}},"./src/observe/container.js":(P,v,d)=>{d.r(v),d.d(v,{Container:()=>e});var j=d("./src/observe/module.js"),g=d("./src/observe/scope.js"),w=d("./src/observe/scope-observer.js"),O=d("./src/observe/util/multimap.js");function y(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}function l(t,a){for(var r=0;r<a.length;r++){var n=a[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,a,r){return a&&l(t.prototype,a),r&&l(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var e=function(){function t(a){y(this,t),this.application=a,this.scopeObserver=new w.ScopeObserver(this.element,this),this.scopesByIdentifier=new O.Multimap,this.modulesByIdentifier=new Map}return s(t,[{key:"element",get:function(){return this.application.element}},{key:"modules",get:function(){return Array.from(this.modulesByIdentifier.values())}},{key:"contexts",get:function(){return this.modules.reduce(function(r,n){return r.concat(n.contexts)},[])}},{key:"start",value:function(){this.scopeObserver.start()}},{key:"stop",value:function(){this.scopeObserver.stop()}},{key:"loadDefinition",value:function(r){this.unloadIdentifier(r.identifier);var n=new j.Module(this.application,r);this.connectModule(n);var i=r.controllerConstructor.afterLoad;i&&i.call(r.controllerConstructor,r.identifier,this.application)}},{key:"unloadIdentifier",value:function(r){var n=this.modulesByIdentifier.get(r);n&&this.disconnectModule(n)}},{key:"getContextForElementAndIdentifier",value:function(r,n){var i=this.modulesByIdentifier.get(n);if(i)return i.contexts.find(function(o){return o.element==r})}},{key:"handleError",value:function(r,n,i){this.application.handleError(r,n,i)}},{key:"createScopeForElementAndIdentifier",value:function(r,n){return new g.Scope(r,n)}},{key:"scopeConnected",value:function(r){this.scopesByIdentifier.add(r.identifier,r);var n=this.modulesByIdentifier.get(r.identifier);n&&n.connectContextForScope(r)}},{key:"scopeDisconnected",value:function(r){this.scopesByIdentifier.delete(r.identifier,r);var n=this.modulesByIdentifier.get(r.identifier);n&&n.disconnectContextForScope(r)}},{key:"connectModule",value:function(r){this.modulesByIdentifier.set(r.identifier,r);var n=this.scopesByIdentifier.getValuesForKey(r.identifier);n.forEach(function(i){return r.connectContextForScope(i)})}},{key:"disconnectModule",value:function(r){this.modulesByIdentifier.delete(r.identifier);var n=this.scopesByIdentifier.getValuesForKey(r.identifier);n.forEach(function(i){return r.disconnectContextForScope(i)})}}]),t}()},"./src/observe/context.js":(P,v,d)=>{d.r(v),d.d(v,{Context:()=>O});function j(y,l){if(!(y instanceof l))throw new TypeError("Cannot call a class as a function")}function g(y,l){for(var s=0;s<l.length;s++){var e=l[s];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(y,e.key,e)}}function w(y,l,s){return l&&g(y.prototype,l),s&&g(y,s),Object.defineProperty(y,"prototype",{writable:!1}),y}var O=function(){function y(l,s){j(this,y),this.module=l,this.scope=s,this.controller=new l.controllerConstructor(this);try{this.controller.initInternal(),this.controller.init()}catch(e){this.handleError(e,"initializing controller")}}return w(y,[{key:"connect",value:function(){try{this.controller.connectInternal(),this.controller.connect()}catch(s){this.handleError(s,"connecting controller")}}},{key:"refresh",value:function(){}},{key:"disconnect",value:function(){try{this.controller.disconnect(),this.controller.disconnectInternal()}catch(s){this.handleError(s,"disconnecting controller")}}},{key:"application",get:function(){return this.module.application}},{key:"identifier",get:function(){return this.module.identifier}},{key:"dispatcher",get:function(){return this.application.dispatcher}},{key:"element",get:function(){return this.scope.element}},{key:"parentElement",get:function(){return this.element.parentElement}},{key:"handleError",value:function(s,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=this.identifier,r=this.controller,n=this.element;t=Object.assign({identifier:a,controller:r,element:n},t),this.application.handleError(s,"Error ".concat(e),t)}}]),y}()},"./src/observe/control-base.js":(P,v,d)=>{d.r(v),d.d(v,{ControlBase:()=>n});function j(i,o){var u=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(!u){if(Array.isArray(i)||(u=O(i))||o&&i&&typeof i.length=="number"){u&&(i=u);var f=0,c=function(){};return{s:c,n:function(){return f>=i.length?{done:!0}:{done:!1,value:i[f++]}},e:function(m){throw m},f:c}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var h=!0,E=!1,p;return{s:function(){u=u.call(i)},n:function(){var m=u.next();return h=m.done,m},e:function(m){E=!0,p=m},f:function(){try{!h&&u.return!=null&&u.return()}finally{if(E)throw p}}}}function g(i){return l(i)||y(i)||O(i)||w()}function w(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function O(i,o){if(i){if(typeof i=="string")return s(i,o);var u=Object.prototype.toString.call(i).slice(8,-1);if(u==="Object"&&i.constructor&&(u=i.constructor.name),u==="Map"||u==="Set")return Array.from(i);if(u==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u))return s(i,o)}}function y(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function l(i){if(Array.isArray(i))return s(i)}function s(i,o){(o==null||o>i.length)&&(o=i.length);for(var u=0,f=new Array(o);u<o;u++)f[u]=i[u];return f}function e(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function t(i,o){for(var u=0;u<o.length;u++){var f=o[u];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(i,f.key,f)}}function a(i,o,u){return o&&t(i.prototype,o),u&&t(i,u),Object.defineProperty(i,"prototype",{writable:!1}),i}function r(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}var n=function(){function i(o){e(this,i),this.context=o}return a(i,[{key:"application",get:function(){return this.context.application}},{key:"scope",get:function(){return this.context.scope}},{key:"element",get:function(){return this.scope.element}},{key:"identifier",get:function(){return this.scope.identifier}},{key:"init",value:function(){}},{key:"connect",value:function(){}},{key:"disconnect",value:function(){}},{key:"initInternal",value:function(){this.proxiedEvents={},this.proxiedMethods={},this.config=this.element.dataset}},{key:"connectInternal",value:function(){}},{key:"disconnectInternal",value:function(){for(var u in this.proxiedEvents)this.forget.apply(this,g(this.proxiedEvents[u]));for(var f in this.proxiedMethods)this.proxiedMethods[f]=null;var c=j(Object.getOwnPropertyNames(this)),h;try{for(c.s();!(h=c.n()).done;){var E=h.value;this[E]=null}}catch(p){c.e(p)}finally{c.f()}}},{key:"listen",value:function(u,f,c){typeof f=="string"?oc.Events.on(this.element,u,f,this.proxy(c)):oc.Events.on(this.element,u,this.proxy(f)),i.proxyCounter++,this.proxiedEvents[i.proxyCounter]=arguments}},{key:"forget",value:function(u,f,c){typeof f=="string"?oc.Events.off(this.element,u,f,this.proxy(c)):oc.Events.off(this.element,u,this.proxy(f))}},{key:"dispatch",value:function(u){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=f.target,h=c===void 0?this.element:c,E=f.detail,p=E===void 0?{}:E,k=f.prefix,m=k===void 0?this.identifier:k,b=f.bubbles,R=b===void 0?!0:b,C=f.cancelable,_=C===void 0?!0:C,B=m?"".concat(m,":").concat(u):u,X=new CustomEvent(B,{detail:p,bubbles:R,cancelable:_});return h.dispatchEvent(X),X}},{key:"proxy",value:function(u){return u.ocProxyId===void 0&&(i.proxyCounter++,u.ocProxyId=i.proxyCounter),this.proxiedMethods[u.ocProxyId]!==void 0?this.proxiedMethods[u.ocProxyId]:(this.proxiedMethods[u.ocProxyId]=u.bind(this),this.proxiedMethods[u.ocProxyId])}}],[{key:"shouldLoad",get:function(){return!0}},{key:"afterLoad",value:function(u,f){}}]),i}();r(n,"proxyCounter",0)},"./src/observe/dispatcher.js":(P,v,d)=>{d.r(v),d.d(v,{Dispatcher:()=>y});var j=d("./src/observe/event-listener.js");function g(l,s){if(!(l instanceof s))throw new TypeError("Cannot call a class as a function")}function w(l,s){for(var e=0;e<s.length;e++){var t=s[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(l,t.key,t)}}function O(l,s,e){return s&&w(l.prototype,s),e&&w(l,e),Object.defineProperty(l,"prototype",{writable:!1}),l}var y=function(){function l(s){g(this,l),this.application=s,this.eventListenerMaps=new Map,this.started=!1}return O(l,[{key:"start",value:function(){this.started||(this.started=!0,this.eventListeners.forEach(function(e){return e.connect()}))}},{key:"stop",value:function(){this.started&&(this.started=!1,this.eventListeners.forEach(function(e){return e.disconnect()}))}},{key:"eventListeners",get:function(){return Array.from(this.eventListenerMaps.values()).reduce(function(e,t){return e.concat(Array.from(t.values()))},[])}},{key:"bindingConnected",value:function(e){this.fetchEventListenerForBinding(e).bindingConnected(e)}},{key:"bindingDisconnected",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this.fetchEventListenerForBinding(e).bindingDisconnected(e),t&&this.clearEventListenersForBinding(e)}},{key:"handleError",value:function(e,t){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.application.handleError(e,"Error ".concat(t),a)}},{key:"clearEventListenersForBinding",value:function(e){var t=this.fetchEventListenerForBinding(e);t.hasBindings()||(t.disconnect(),this.removeMappedEventListenerFor(e))}},{key:"removeMappedEventListenerFor",value:function(e){var t=e.eventTarget,a=e.eventName,r=e.eventOptions,n=this.fetchEventListenerMapForEventTarget(t),i=this.cacheKey(a,r);n.delete(i),n.size==0&&this.eventListenerMaps.delete(t)}},{key:"fetchEventListenerForBinding",value:function(e){var t=e.eventTarget,a=e.eventName,r=e.eventOptions;return this.fetchEventListener(t,a,r)}},{key:"fetchEventListener",value:function(e,t,a){var r=this.fetchEventListenerMapForEventTarget(e),n=this.cacheKey(t,a),i=r.get(n);return i||(i=this.createEventListener(e,t,a),r.set(n,i)),i}},{key:"createEventListener",value:function(e,t,a){var r=new j.EventListener(e,t,a);return this.started&&r.connect(),r}},{key:"fetchEventListenerMapForEventTarget",value:function(e){var t=this.eventListenerMaps.get(e);return t||(t=new Map,this.eventListenerMaps.set(e,t)),t}},{key:"cacheKey",value:function(e,t){var a=[e];return Object.keys(t).sort().forEach(function(r){a.push("".concat(t[r]?"":"!").concat(r))}),a.join(":")}}]),l}()},"./src/observe/event-listener.js":(P,v,d)=>{d.r(v),d.d(v,{EventListener:()=>s});function j(t,a){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=g(t))||a&&t&&typeof t.length=="number"){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(h){throw h},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,u=!1,f;return{s:function(){r=r.call(t)},n:function(){var h=r.next();return o=h.done,h},e:function(h){u=!0,f=h},f:function(){try{!o&&r.return!=null&&r.return()}finally{if(u)throw f}}}}function g(t,a){if(t){if(typeof t=="string")return w(t,a);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w(t,a)}}function w(t,a){(a==null||a>t.length)&&(a=t.length);for(var r=0,n=new Array(a);r<a;r++)n[r]=t[r];return n}function O(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}function y(t,a){for(var r=0;r<a.length;r++){var n=a[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(t,a,r){return a&&y(t.prototype,a),r&&y(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var s=function(){function t(a,r,n){O(this,t),this.eventTarget=a,this.eventName=r,this.eventOptions=n,this.unorderedBindings=new Set}return l(t,[{key:"connect",value:function(){this.eventTarget.addEventListener(this.eventName,this,this.eventOptions)}},{key:"disconnect",value:function(){this.eventTarget.removeEventListener(this.eventName,this,this.eventOptions)}},{key:"bindingConnected",value:function(r){this.unorderedBindings.add(r)}},{key:"bindingDisconnected",value:function(r){this.unorderedBindings.delete(r)}},{key:"handleEvent",value:function(r){var n=e(r),i=j(this.bindings),o;try{for(i.s();!(o=i.n()).done;){var u=o.value;if(n.immediatePropagationStopped)break;u.handleEvent(n)}}catch(f){i.e(f)}finally{i.f()}}},{key:"hasBindings",value:function(){return this.unorderedBindings.size>0}},{key:"bindings",get:function(){return Array.from(this.unorderedBindings).sort(function(r,n){var i=r.index,o=n.index;return i<o?-1:i>o?1:0})}}]),t}();function e(t){if("immediatePropagationStopped"in t)return t;var a=t.stopImmediatePropagation;return Object.assign(t,{immediatePropagationStopped:!1,stopImmediatePropagation:function(){this.immediatePropagationStopped=!0,a.call(this)}})}},"./src/observe/index.js":(P,v,d)=>{d.r(v),d.d(v,{default:()=>O});var j=d("./src/observe/control-base.js"),g=d("./src/observe/namespace.js");function w(s){return w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(s)}const O=g.default;window.oc||(window.oc={}),window.oc.AjaxObserve||(window.oc.AjaxObserve=g.default,window.oc.registerControl=g.default.registerControl,window.oc.fetchControl=g.default.fetchControl,window.oc.fetchControls=g.default.fetchControls,window.oc.ControlBase=j.ControlBase,!y()&&!l()&&g.default.start());function y(){return typeof define=="function"&&d.amdO}function l(){return(typeof Y>"u"?"undefined":w(Y))=="object"&&!0}},"./src/observe/module.js":(P,v,d)=>{d.r(v),d.d(v,{Module:()=>y});var j=d("./src/observe/context.js");function g(s,e){if(!(s instanceof e))throw new TypeError("Cannot call a class as a function")}function w(s,e){for(var t=0;t<e.length;t++){var a=e[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(s,a.key,a)}}function O(s,e,t){return e&&w(s.prototype,e),t&&w(s,t),Object.defineProperty(s,"prototype",{writable:!1}),s}var y=function(){function s(e,t){g(this,s),this.application=e,this.definition=l(t),this.contextsByScope=new WeakMap,this.connectedContexts=new Set}return O(s,[{key:"identifier",get:function(){return this.definition.identifier}},{key:"controllerConstructor",get:function(){return this.definition.controllerConstructor}},{key:"contexts",get:function(){return Array.from(this.connectedContexts)}},{key:"connectContextForScope",value:function(t){var a=this.fetchContextForScope(t);this.connectedContexts.add(a),a.connect()}},{key:"disconnectContextForScope",value:function(t){var a=this.contextsByScope.get(t);a&&(this.connectedContexts.delete(a),a.disconnect())}},{key:"fetchContextForScope",value:function(t){var a=this.contextsByScope.get(t);return a||(a=new j.Context(this,t),this.contextsByScope.set(t,a)),a}}]),s}();function l(s){return{identifier:s.identifier,controllerConstructor:s.controllerConstructor}}},"./src/observe/mutation/attribute-observer.js":(P,v,d)=>{d.r(v),d.d(v,{AttributeObserver:()=>y});var j=d("./src/observe/mutation/element-observer.js");function g(l,s){if(!(l instanceof s))throw new TypeError("Cannot call a class as a function")}function w(l,s){for(var e=0;e<s.length;e++){var t=s[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(l,t.key,t)}}function O(l,s,e){return s&&w(l.prototype,s),e&&w(l,e),Object.defineProperty(l,"prototype",{writable:!1}),l}var y=function(){function l(s,e,t){g(this,l),this.delegate=t,this.attributeName=e,this.elementObserver=new j.ElementObserver(s,this)}return O(l,[{key:"element",get:function(){return this.elementObserver.element}},{key:"selector",get:function(){return"[".concat(this.attributeName,"]")}},{key:"start",value:function(){this.elementObserver.start()}},{key:"pause",value:function(e){this.elementObserver.pause(e)}},{key:"stop",value:function(){this.elementObserver.stop()}},{key:"refresh",value:function(){this.elementObserver.refresh()}},{key:"started",get:function(){return this.elementObserver.started}},{key:"matchElement",value:function(e){return e.hasAttribute(this.attributeName)}},{key:"matchElementsInTree",value:function(e){var t=this.matchElement(e)?[e]:[],a=Array.from(e.querySelectorAll(this.selector));return t.concat(a)}},{key:"elementMatched",value:function(e){this.delegate.elementMatchedAttribute&&this.delegate.elementMatchedAttribute(e,this.attributeName)}},{key:"elementUnmatched",value:function(e){this.delegate.elementUnmatchedAttribute&&this.delegate.elementUnmatchedAttribute(e,this.attributeName)}},{key:"elementAttributeChanged",value:function(e,t){this.delegate.elementAttributeValueChanged&&this.attributeName==t&&this.delegate.elementAttributeValueChanged(e,t)}}]),l}()},"./src/observe/mutation/element-observer.js":(P,v,d)=>{d.r(v),d.d(v,{ElementObserver:()=>s});function j(e,t){var a=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=g(e))||t&&e&&typeof e.length=="number"){a&&(e=a);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(c){throw c},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,u;return{s:function(){a=a.call(e)},n:function(){var c=a.next();return i=c.done,c},e:function(c){o=!0,u=c},f:function(){try{!i&&a.return!=null&&a.return()}finally{if(o)throw u}}}}function g(e,t){if(e){if(typeof e=="string")return w(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return w(e,t)}}function w(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,a){return t&&y(e.prototype,t),a&&y(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}var s=function(){function e(t,a){var r=this;O(this,e),this.mutationObserverInit={attributes:!0,childList:!0,subtree:!0},this.element=t,this.started=!1,this.delegate=a,this.elements=new Set,this.mutationObserver=new MutationObserver(function(n){return r.processMutations(n)})}return l(e,[{key:"start",value:function(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,this.mutationObserverInit),this.refresh())}},{key:"pause",value:function(a){this.started&&(this.mutationObserver.disconnect(),this.started=!1),a(),this.started||(this.mutationObserver.observe(this.element,this.mutationObserverInit),this.started=!0)}},{key:"stop",value:function(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}},{key:"refresh",value:function(){if(this.started){for(var a=new Set(this.matchElementsInTree()),r=0,n=Array.from(this.elements);r<n.length;r++){var i=n[r];a.has(i)||this.removeElement(i)}for(var o=0,u=Array.from(a);o<u.length;o++){var f=u[o];this.addElement(f)}}}},{key:"processMutations",value:function(a){if(this.started){var r=j(a),n;try{for(r.s();!(n=r.n()).done;){var i=n.value;this.processMutation(i)}}catch(o){r.e(o)}finally{r.f()}}}},{key:"processMutation",value:function(a){a.type=="attributes"?this.processAttributeChange(a.target,a.attributeName):a.type=="childList"&&(this.processRemovedNodes(a.removedNodes),this.processAddedNodes(a.addedNodes))}},{key:"processAttributeChange",value:function(a,r){this.elements.has(a)?this.delegate.elementAttributeChanged&&this.matchElement(a)?this.delegate.elementAttributeChanged(a,r):this.removeElement(a):this.matchElement(a)&&this.addElement(a)}},{key:"processRemovedNodes",value:function(a){for(var r=0,n=Array.from(a);r<n.length;r++){var i=n[r],o=this.elementFromNode(i);o&&this.processTree(o,this.removeElement)}}},{key:"processAddedNodes",value:function(a){for(var r=0,n=Array.from(a);r<n.length;r++){var i=n[r],o=this.elementFromNode(i);o&&this.elementIsActive(o)&&this.processTree(o,this.addElement)}}},{key:"matchElement",value:function(a){return this.delegate.matchElement(a)}},{key:"matchElementsInTree",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.element;return this.delegate.matchElementsInTree(a)}},{key:"processTree",value:function(a,r){var n=j(this.matchElementsInTree(a)),i;try{for(n.s();!(i=n.n()).done;){var o=i.value;r.call(this,o)}}catch(u){n.e(u)}finally{n.f()}}},{key:"elementFromNode",value:function(a){if(a.nodeType==Node.ELEMENT_NODE)return a}},{key:"elementIsActive",value:function(a){return a.isConnected!=this.element.isConnected?!1:this.element.contains(a)}},{key:"addElement",value:function(a){this.elements.has(a)||this.elementIsActive(a)&&(this.elements.add(a),this.delegate.elementMatched&&this.delegate.elementMatched(a))}},{key:"removeElement",value:function(a){this.elements.has(a)&&(this.elements.delete(a),this.delegate.elementUnmatched&&this.delegate.elementUnmatched(a))}}]),e}()},"./src/observe/mutation/index.js":(P,v,d)=>{d.r(v),d.d(v,{AttributeObserver:()=>j.AttributeObserver,ElementObserver:()=>g.ElementObserver,SelectorObserver:()=>w.SelectorObserver,TokenListObserver:()=>O.TokenListObserver,ValueListObserver:()=>y.ValueListObserver});var j=d("./src/observe/mutation/attribute-observer.js"),g=d("./src/observe/mutation/element-observer.js"),w=d("./src/observe/mutation/selector-observer.js"),O=d("./src/observe/mutation/token-list-observer.js"),y=d("./src/observe/mutation/value-list-observer.js")},"./src/observe/mutation/selector-observer.js":(P,v,d)=>{d.r(v),d.d(v,{SelectorObserver:()=>t});var j=d("./src/observe/mutation/element-observer.js"),g=d("./src/observe/util/multimap.js");function w(a,r){var n=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!n){if(Array.isArray(a)||(n=O(a))||r&&a&&typeof a.length=="number"){n&&(a=n);var i=0,o=function(){};return{s:o,n:function(){return i>=a.length?{done:!0}:{done:!1,value:a[i++]}},e:function(E){throw E},f:o}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u=!0,f=!1,c;return{s:function(){n=n.call(a)},n:function(){var E=n.next();return u=E.done,E},e:function(E){f=!0,c=E},f:function(){try{!u&&n.return!=null&&n.return()}finally{if(f)throw c}}}}function O(a,r){if(a){if(typeof a=="string")return y(a,r);var n=Object.prototype.toString.call(a).slice(8,-1);if(n==="Object"&&a.constructor&&(n=a.constructor.name),n==="Map"||n==="Set")return Array.from(a);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(a,r)}}function y(a,r){(r==null||r>a.length)&&(r=a.length);for(var n=0,i=new Array(r);n<r;n++)i[n]=a[n];return i}function l(a,r){if(!(a instanceof r))throw new TypeError("Cannot call a class as a function")}function s(a,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(a,i.key,i)}}function e(a,r,n){return r&&s(a.prototype,r),n&&s(a,n),Object.defineProperty(a,"prototype",{writable:!1}),a}var t=function(){function a(r,n,i,o){l(this,a),this._selector=n,this.details=o,this.elementObserver=new j.ElementObserver(r,this),this.delegate=i,this.matchesByElement=new g.Multimap}return e(a,[{key:"started",get:function(){return this.elementObserver.started}},{key:"selector",get:function(){return this._selector},set:function(n){this._selector=n,this.refresh()}},{key:"start",value:function(){this.elementObserver.start()}},{key:"pause",value:function(n){this.elementObserver.pause(n)}},{key:"stop",value:function(){this.elementObserver.stop()}},{key:"refresh",value:function(){this.elementObserver.refresh()}},{key:"element",get:function(){return this.elementObserver.element}},{key:"matchElement",value:function(n){var i=this.selector;if(i){var o=n.matches(i);return this.delegate.selectorMatchElement?o&&this.delegate.selectorMatchElement(n,this.details):o}else return!1}},{key:"matchElementsInTree",value:function(n){var i=this,o=this.selector;if(o){var u=this.matchElement(n)?[n]:[],f=Array.from(n.querySelectorAll(o)).filter(function(c){return i.matchElement(c)});return u.concat(f)}else return[]}},{key:"elementMatched",value:function(n){var i=this.selector;i&&this.selectorMatched(n,i)}},{key:"elementUnmatched",value:function(n){var i=this.matchesByElement.getKeysForValue(n),o=w(i),u;try{for(o.s();!(u=o.n()).done;){var f=u.value;this.selectorUnmatched(n,f)}}catch(c){o.e(c)}finally{o.f()}}},{key:"elementAttributeChanged",value:function(n,i){var o=this.selector;if(o){var u=this.matchElement(n),f=this.matchesByElement.has(o,n);u&&!f?this.selectorMatched(n,o):!u&&f&&this.selectorUnmatched(n,o)}}},{key:"selectorMatched",value:function(n,i){this.delegate.selectorMatched(n,i,this.details),this.matchesByElement.add(i,n)}},{key:"selectorUnmatched",value:function(n,i){this.delegate.selectorUnmatched(n,i,this.details),this.matchesByElement.delete(i,n)}}]),a}()},"./src/observe/mutation/token-list-observer.js":(P,v,d)=>{d.r(v),d.d(v,{TokenListObserver:()=>n});var j=d("./src/observe/mutation/attribute-observer.js"),g=d("./src/observe/util/multimap.js");function w(f,c){return e(f)||s(f,c)||y(f,c)||O()}function O(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function y(f,c){if(f){if(typeof f=="string")return l(f,c);var h=Object.prototype.toString.call(f).slice(8,-1);if(h==="Object"&&f.constructor&&(h=f.constructor.name),h==="Map"||h==="Set")return Array.from(f);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return l(f,c)}}function l(f,c){(c==null||c>f.length)&&(c=f.length);for(var h=0,E=new Array(c);h<c;h++)E[h]=f[h];return E}function s(f,c){var h=f==null?null:typeof Symbol<"u"&&f[Symbol.iterator]||f["@@iterator"];if(h!=null){var E=[],p=!0,k=!1,m,b;try{for(h=h.call(f);!(p=(m=h.next()).done)&&(E.push(m.value),!(c&&E.length===c));p=!0);}catch(R){k=!0,b=R}finally{try{!p&&h.return!=null&&h.return()}finally{if(k)throw b}}return E}}function e(f){if(Array.isArray(f))return f}function t(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")}function a(f,c){for(var h=0;h<c.length;h++){var E=c[h];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(f,E.key,E)}}function r(f,c,h){return c&&a(f.prototype,c),h&&a(f,h),Object.defineProperty(f,"prototype",{writable:!1}),f}var n=function(){function f(c,h,E){t(this,f),this.delegate=E,this.attributeObserver=new j.AttributeObserver(c,h,this),this.tokensByElement=new g.Multimap}return r(f,[{key:"started",get:function(){return this.attributeObserver.started}},{key:"start",value:function(){this.attributeObserver.start()}},{key:"pause",value:function(h){this.attributeObserver.pause(h)}},{key:"stop",value:function(){this.attributeObserver.stop()}},{key:"refresh",value:function(){this.attributeObserver.refresh()}},{key:"element",get:function(){return this.attributeObserver.element}},{key:"attributeName",get:function(){return this.attributeObserver.attributeName}},{key:"elementMatchedAttribute",value:function(h){this.tokensMatched(this.readTokensForElement(h))}},{key:"elementAttributeValueChanged",value:function(h){var E=this.refreshTokensForElement(h),p=w(E,2),k=p[0],m=p[1];this.tokensUnmatched(k),this.tokensMatched(m)}},{key:"elementUnmatchedAttribute",value:function(h){this.tokensUnmatched(this.tokensByElement.getValuesForKey(h))}},{key:"tokensMatched",value:function(h){var E=this;h.forEach(function(p){return E.tokenMatched(p)})}},{key:"tokensUnmatched",value:function(h){var E=this;h.forEach(function(p){return E.tokenUnmatched(p)})}},{key:"tokenMatched",value:function(h){this.delegate.tokenMatched(h),this.tokensByElement.add(h.element,h)}},{key:"tokenUnmatched",value:function(h){this.delegate.tokenUnmatched(h),this.tokensByElement.delete(h.element,h)}},{key:"refreshTokensForElement",value:function(h){var E=this.tokensByElement.getValuesForKey(h),p=this.readTokensForElement(h),k=o(E,p).findIndex(function(m){var b=w(m,2),R=b[0],C=b[1];return!u(R,C)});return k==-1?[[],[]]:[E.slice(k),p.slice(k)]}},{key:"readTokensForElement",value:function(h){var E=this.attributeName,p=h.getAttribute(E)||"";return i(p,h,E)}}]),f}();function i(f,c,h){return f.trim().split(/\s+/).filter(function(E){return E.length}).map(function(E,p){return{element:c,attributeName:h,content:E,index:p}})}function o(f,c){var h=Math.max(f.length,c.length);return Array.from({length:h},function(E,p){return[f[p],c[p]]})}function u(f,c){return f&&c&&f.index==c.index&&f.content==c.content}},"./src/observe/mutation/value-list-observer.js":(P,v,d)=>{d.r(v),d.d(v,{ValueListObserver:()=>y});var j=d("./src/observe/mutation/token-list-observer.js");function g(l,s){if(!(l instanceof s))throw new TypeError("Cannot call a class as a function")}function w(l,s){for(var e=0;e<s.length;e++){var t=s[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(l,t.key,t)}}function O(l,s,e){return s&&w(l.prototype,s),e&&w(l,e),Object.defineProperty(l,"prototype",{writable:!1}),l}var y=function(){function l(s,e,t){g(this,l),this.tokenListObserver=new j.TokenListObserver(s,e,this),this.delegate=t,this.parseResultsByToken=new WeakMap,this.valuesByTokenByElement=new WeakMap}return O(l,[{key:"started",get:function(){return this.tokenListObserver.started}},{key:"start",value:function(){this.tokenListObserver.start()}},{key:"stop",value:function(){this.tokenListObserver.stop()}},{key:"refresh",value:function(){this.tokenListObserver.refresh()}},{key:"element",get:function(){return this.tokenListObserver.element}},{key:"attributeName",get:function(){return this.tokenListObserver.attributeName}},{key:"tokenMatched",value:function(e){var t=e.element,a=this.fetchParseResultForToken(e),r=a.value;r&&(this.fetchValuesByTokenForElement(t).set(e,r),this.delegate.elementMatchedValue(t,r))}},{key:"tokenUnmatched",value:function(e){var t=e.element,a=this.fetchParseResultForToken(e),r=a.value;r&&(this.fetchValuesByTokenForElement(t).delete(e),this.delegate.elementUnmatchedValue(t,r))}},{key:"fetchParseResultForToken",value:function(e){var t=this.parseResultsByToken.get(e);return t||(t=this.parseToken(e),this.parseResultsByToken.set(e,t)),t}},{key:"fetchValuesByTokenForElement",value:function(e){var t=this.valuesByTokenByElement.get(e);return t||(t=new Map,this.valuesByTokenByElement.set(e,t)),t}},{key:"parseToken",value:function(e){try{var t=this.delegate.parseValueForToken(e);return{value:t}}catch(a){return{error:a}}}}]),l}()},"./src/observe/namespace.js":(P,v,d)=>{d.r(v),d.d(v,{default:()=>w});var j=d("./src/observe/application.js"),g=new j.Application;const w={application:g,registerControl:function(y,l){return g.register(y,l)},fetchControl:function(y){return g.fetch(y)},fetchControls:function(y){return g.fetchAll(y)},start:function(){g.startAsync()},stop:function(){g.stop()}}},"./src/observe/scope-observer.js":(P,v,d)=>{d.r(v),d.d(v,{ScopeObserver:()=>y});var j=d("./src/observe/mutation/index.js");function g(l,s){if(!(l instanceof s))throw new TypeError("Cannot call a class as a function")}function w(l,s){for(var e=0;e<s.length;e++){var t=s[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(l,t.key,t)}}function O(l,s,e){return s&&w(l.prototype,s),e&&w(l,e),Object.defineProperty(l,"prototype",{writable:!1}),l}var y=function(){function l(s,e){g(this,l),this.element=s,this.delegate=e,this.valueListObserver=new j.ValueListObserver(this.element,this.controllerAttribute,this),this.scopesByIdentifierByElement=new WeakMap,this.scopeReferenceCounts=new WeakMap}return O(l,[{key:"start",value:function(){this.valueListObserver.start()}},{key:"stop",value:function(){this.valueListObserver.stop()}},{key:"controllerAttribute",get:function(){return"data-control"}},{key:"parseValueForToken",value:function(e){var t=e.element,a=e.content,r=this.fetchScopesByIdentifierForElement(t),n=r.get(a);return n||(n=this.delegate.createScopeForElementAndIdentifier(t,a),r.set(a,n)),n}},{key:"elementMatchedValue",value:function(e,t){var a=(this.scopeReferenceCounts.get(t)||0)+1;this.scopeReferenceCounts.set(t,a),a==1&&this.delegate.scopeConnected(t)}},{key:"elementUnmatchedValue",value:function(e,t){var a=this.scopeReferenceCounts.get(t);a&&(this.scopeReferenceCounts.set(t,a-1),a==1&&this.delegate.scopeDisconnected(t))}},{key:"fetchScopesByIdentifierForElement",value:function(e){var t=this.scopesByIdentifierByElement.get(e);return t||(t=new Map,this.scopesByIdentifierByElement.set(e,t)),t}}]),l}()},"./src/observe/scope.js":(P,v,d)=>{d.r(v),d.d(v,{Scope:()=>a});function j(n){return y(n)||O(n)||w(n)||g()}function g(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function w(n,i){if(n){if(typeof n=="string")return l(n,i);var o=Object.prototype.toString.call(n).slice(8,-1);if(o==="Object"&&n.constructor&&(o=n.constructor.name),o==="Map"||o==="Set")return Array.from(n);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return l(n,i)}}function O(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function y(n){if(Array.isArray(n))return l(n)}function l(n,i){(i==null||i>n.length)&&(i=n.length);for(var o=0,u=new Array(i);o<i;o++)u[o]=n[o];return u}function s(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")}function e(n,i){for(var o=0;o<i.length;o++){var u=i[o];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function t(n,i,o){return i&&e(n.prototype,i),o&&e(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n}var a=function(){function n(i,o){var u=this;s(this,n),this.element=i,this.identifier=o,this.containsElement=function(f){return f.closest(u.controllerSelector)===u.element}}return t(n,[{key:"findElement",value:function(o){return this.element.matches(o)?this.element:this.queryElements(o).find(this.containsElement)}},{key:"findAllElements",value:function(o){return[].concat(j(this.element.matches(o)?[this.element]:[]),j(this.queryElements(o).filter(this.containsElement)))}},{key:"queryElements",value:function(o){return Array.from(this.element.querySelectorAll(o))}},{key:"controllerSelector",get:function(){return r("data-control",this.identifier)}},{key:"isDocumentScope",get:function(){return this.element===document.documentElement}},{key:"documentScope",get:function(){return this.isDocumentScope?this:new n(document.documentElement,this.identifier)}}]),n}();function r(n,i){return"[".concat(n,'~="').concat(i,'"]')}},"./src/observe/util/multimap.js":(P,v,d)=>{d.r(v),d.d(v,{Multimap:()=>r});var j=d("./src/observe/util/set-operations.js");function g(n,i){return s(n)||l(n,i)||O(n,i)||w()}function w(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function O(n,i){if(n){if(typeof n=="string")return y(n,i);var o=Object.prototype.toString.call(n).slice(8,-1);if(o==="Object"&&n.constructor&&(o=n.constructor.name),o==="Map"||o==="Set")return Array.from(n);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return y(n,i)}}function y(n,i){(i==null||i>n.length)&&(i=n.length);for(var o=0,u=new Array(i);o<i;o++)u[o]=n[o];return u}function l(n,i){var o=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(o!=null){var u=[],f=!0,c=!1,h,E;try{for(o=o.call(n);!(f=(h=o.next()).done)&&(u.push(h.value),!(i&&u.length===i));f=!0);}catch(p){c=!0,E=p}finally{try{!f&&o.return!=null&&o.return()}finally{if(c)throw E}}return u}}function s(n){if(Array.isArray(n))return n}function e(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")}function t(n,i){for(var o=0;o<i.length;o++){var u=i[o];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function a(n,i,o){return i&&t(n.prototype,i),o&&t(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n}var r=function(){function n(){e(this,n),this.valuesByKey=new Map}return a(n,[{key:"keys",get:function(){return Array.from(this.valuesByKey.keys())}},{key:"values",get:function(){var o=Array.from(this.valuesByKey.values());return o.reduce(function(u,f){return u.concat(Array.from(f))},React.createElement(V,null),[]>[])}},{key:"size",get:function(){var o=Array.from(this.valuesByKey.values());return o.reduce(function(u,f){return u+f.size},0)}},{key:"add",value:function(o,u){(0,j.add)(this.valuesByKey,o,u)}},{key:"delete",value:function(o,u){(0,j.del)(this.valuesByKey,o,u)}},{key:"has",value:function(o,u){var f=this.valuesByKey.get(o);return f!=null&&f.has(u)}},{key:"hasKey",value:function(o){return this.valuesByKey.has(o)}},{key:"hasValue",value:function(o){var u=Array.from(this.valuesByKey.values());return u.some(function(f){return f.has(o)})}},{key:"getValuesForKey",value:function(o){var u=this.valuesByKey.get(o);return u?Array.from(u):[]}},{key:"getKeysForValue",value:function(o){return Array.from(this.valuesByKey).filter(function(u){var f=g(u,2);f[0];var c=f[1];return c.has(o)}).map(function(u){var f=g(u,2),c=f[0];return f[1],c})}}]),n}()},"./src/observe/util/set-operations.js":(P,v,d)=>{d.r(v),d.d(v,{add:()=>j,del:()=>g,fetch:()=>w,prune:()=>O});function j(y,l,s){w(y,l).add(s)}function g(y,l,s){w(y,l).delete(s),O(y,l)}function w(y,l){var s=y.get(l);return s||(s=new Set,y.set(l,s)),s}function O(y,l){var s=y.get(l);s!=null&&s.size==0&&y.delete(l)}},"./src/request/actions.js":(P,v,d)=>{d.r(v),d.d(v,{Actions:()=>o,ActionsUpdateMode:()=>i});var j=d("./src/request/asset-manager.js"),g=d("./src/util/http-request.js"),w=d("./src/util/deferred.js");function O(p){return e(p)||s(p)||l(p)||y()}function y(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function l(p,k){if(p){if(typeof p=="string")return t(p,k);var m=Object.prototype.toString.call(p).slice(8,-1);if(m==="Object"&&p.constructor&&(m=p.constructor.name),m==="Map"||m==="Set")return Array.from(p);if(m==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m))return t(p,k)}}function s(p){if(typeof Symbol<"u"&&p[Symbol.iterator]!=null||p["@@iterator"]!=null)return Array.from(p)}function e(p){if(Array.isArray(p))return t(p)}function t(p,k){(k==null||k>p.length)&&(k=p.length);for(var m=0,b=new Array(k);m<k;m++)b[m]=p[m];return b}function a(p,k){if(!(p instanceof k))throw new TypeError("Cannot call a class as a function")}function r(p,k){for(var m=0;m<k.length;m++){var b=k[m];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(p,b.key,b)}}function n(p,k,m){return k&&r(p.prototype,k),m&&r(p,m),Object.defineProperty(p,"prototype",{writable:!1}),p}var i={replaceWith:"replace",prepend:"prepend",append:"append",update:"update"},o=function(){function p(k,m,b){a(this,p),this.el=k.el,this.delegate=k,this.context=m,this.options=b,this.context.start=this.start.bind(this),this.context.success=this.success.bind(this),this.context.error=this.error.bind(this),this.context.complete=this.complete.bind(this)}return n(p,[{key:"invoke",value:function(m,b){if(this.options[m])return this.options[m].apply(this.context,b);if(this[m])return this[m].apply(this,O(b))}},{key:"invokeFunc",value:function(m,b){if(this.options[m])return this.options[m](this.el,b)}},{key:"start",value:function(m){this.invoke("markAsUpdating",[!0])}},{key:"success",value:function(m,b,R){if(this.invoke("beforeUpdate",[m,b,R])!==!1&&this.invokeFunc("beforeUpdateFunc",m)!==!1&&this.delegate.applicationAllowsUpdate(m,b,R)&&!(this.delegate.options.download&&m instanceof Blob&&this.invoke("handleFileDownload",[m,R]))){if(this.delegate.options.flash&&m.X_OCTOBER_FLASH_MESSAGES)for(var C in m.X_OCTOBER_FLASH_MESSAGES)this.invoke("handleFlashMessage",[m.X_OCTOBER_FLASH_MESSAGES[C],C]);var _=this,B=this.invoke("handleUpdateResponse",[m,b,R]);return B.done(function(){_.delegate.notifyApplicationRequestSuccess(m,b,R),_.invokeFunc("successFunc",m)}),B}}},{key:"error",value:function(m,b,R){var C,_=new w.Deferred,B=this;if(!(window.ocUnloading!==void 0&&window.ocUnloading||b==g.SystemStatusCode.userAborted))return this.delegate.toggleRedirect(!1),b==406&&m?(C=m.X_OCTOBER_ERROR_MESSAGE,_=this.invoke("handleUpdateResponse",[m,b,R])):(C=m,_.resolve()),_.done(function(){B.el!==document&&B.el.setAttribute("data-error-message",C),B.delegate.applicationAllowsError(m,b,R)&&B.invokeFunc("errorFunc",m)!==!1&&B.invoke("handleErrorMessage",[C])}),_}},{key:"complete",value:function(m,b,R){this.delegate.notifyApplicationRequestComplete(m,b,R),this.invokeFunc("completeFunc",m),this.invoke("markAsUpdating",[!1])}},{key:"handleConfirmMessage",value:function(m){var b=this,R=new w.Deferred;R.done(function(){b.delegate.sendInternal()});var C=this.delegate.notifyApplicationConfirmMessage(m,R);if(C.defaultPrevented)return!1;if(m)return confirm(m)}},{key:"handleFlashMessage",value:function(m,b){}},{key:"handleErrorMessage",value:function(m){var b=this.delegate.notifyApplicationErrorMessage(m);b.defaultPrevented||m&&alert(m)}},{key:"handleValidationMessage",value:function(m,b){if(this.delegate.notifyApplicationBeforeValidate(m,b),!!this.delegate.formEl){var R=!0;for(var C in b){var _=C.replace(/\.(\w+)/g,"[$1]"),B=("."+C).replace(/\.(\w+)/g,"[$1]"),X=['[name="'+_+'"]:not([disabled])','[name="'+_+'[]"]:not([disabled])','[name$="'+B+'"]:not([disabled])','[name$="'+B+'[]"]:not([disabled])'],q=this.delegate.formEl.querySelector(X.join(", "));if(q){var A=this.delegate.notifyApplicationFieldInvalid(q,C,b[C],R);R&&(A.defaultPrevented||q.focus(),R=!1)}}}}},{key:"handleRedirectResponse",value:function(m){var b=this.delegate.notifyApplicationBeforeRedirect();b.defaultPrevented||(oc.useTurbo&&oc.useTurbo()?oc.visit(m):location.assign(m))}},{key:"markAsUpdating",value:function(m){var b=this.options.update||{};for(var R in b){var C=b[R],_=[];b._self&&R==this.options.partial&&this.delegate.partialEl?(C=b._self,_=[this.delegate.partialEl]):_=u(C,'[data-ajax-partial="'+R+'"]'),_.forEach(function(B){m?B.setAttribute("data-ajax-updating",""):B.removeAttribute("data-ajax-updating")})}}},{key:"handleUpdateResponse",value:function(m,b,R){var C=this,_=this.options.update||{},B=new w.Deferred;return B.done(function(){var X=function(){var x=_[q]||q,T=[];_._self&&q==C.options.partial&&C.delegate.partialEl?(x=_._self,T=[C.delegate.partialEl]):T=u(x,'[data-ajax-partial="'+q+'"]'),T.forEach(function(S){var D=f(x,S);if(D===i.replaceWith){var M=S.parentNode;S.insertAdjacentHTML("afterEnd",m[q]),M.removeChild(S),h(M,m[q])}else D===i.append?(S.insertAdjacentHTML("beforeEnd",m[q]),h(S,m[q])):D===i.prepend?(S.insertAdjacentHTML("afterBegin",m[q]),h(S,m[q])):(C.delegate.notifyApplicationBeforeReplace(S),S.innerHTML=m[q],c(S));C.delegate.notifyApplicationAjaxUpdate(S,m,b,R)})};for(var q in m)X();setTimeout(function(){C.delegate.notifyApplicationUpdateComplete(m,b,R),C.invoke("afterUpdate",[m,b,R]),C.invokeFunc("afterUpdateFunc",m)},0)}),m.X_OCTOBER_REDIRECT&&this.delegate.toggleRedirect(m.X_OCTOBER_REDIRECT),this.delegate.isRedirect&&this.invoke("handleRedirectResponse",[this.delegate.options.redirect]),m.X_OCTOBER_ERROR_FIELDS&&this.invoke("handleValidationMessage",[m.X_OCTOBER_ERROR_MESSAGE,m.X_OCTOBER_ERROR_FIELDS]),m.X_OCTOBER_ASSETS?j.AssetManager.load(m.X_OCTOBER_ASSETS,function(){return B.resolve()}):B.resolve(),B}},{key:"handleFileDownload",value:function(m,b){if(this.options.browserTarget)return window.open(window.URL.createObjectURL(m),this.options.browserTarget),!0;var R=typeof this.options.download=="string"?this.options.download:E(b);if(R){var C=document.createElement("a");return C.href=window.URL.createObjectURL(m),C.download=R,C.target="_blank",C.click(),window.URL.revokeObjectURL(C.href),!0}}},{key:"applyQueryToUrl",value:function(m){for(var b=new URLSearchParams(window.location.search),R=0,C=Object.keys(m);R<C.length;R++){var _=C[R];b.set(_,m[_])}var B=window.location.pathname+"?"+b.toString();oc.useTurbo&&oc.useTurbo()?oc.visit(B,{action:"swap",scroll:!1}):(history.replaceState(null,"",B),localStorage.setItem("ocPushStateReferrer",B))}}]),p}();function u(p,k){return p===!0?document.querySelectorAll(k):typeof p!="string"?[p]:["#",".","@","^","!","="].indexOf(p.charAt(0))===-1?[]:(["@","^","!","="].indexOf(p.charAt(0))!==-1&&(p=p.substring(1)),p||(p=k),document.querySelectorAll(p))}function f(p,k){if(typeof p=="string"){if(p.charAt(0)==="!")return i.replaceWith;if(p.charAt(0)==="@")return i.append;if(p.charAt(0)==="^")return i.prepend}return k.dataset.ajaxUpdateMode!==void 0?k.dataset.ajaxUpdateMode:i.update}function c(p){Array.from(p.querySelectorAll("script")).forEach(function(k){var m=document.createElement("script");Array.from(k.attributes).forEach(function(b){return m.setAttribute(b.name,b.value)}),m.appendChild(document.createTextNode(k.innerHTML)),k.parentNode.replaceChild(m,k)})}function h(p,k){var m=document.createElement("div");m.innerHTML=k,Array.from(m.querySelectorAll("script")).forEach(function(b){var R=document.createElement("script");Array.from(b.attributes).forEach(function(C){return R.setAttribute(C.name,C.value)}),R.appendChild(document.createTextNode(b.innerHTML)),p.appendChild(R),p.removeChild(R)})}function E(p){var k=p.getResponseHeader("Content-Disposition");if(!k)return null;for(var m=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/g,b=null,R=null;(R=m.exec(k))!==null;)b=R;return b!==null&&b[1]?/filename[^;*=\n]*\*=[^']*''/.exec(b[0])===null?b[1].replace(/['"]/g,""):decodeURIComponent(b[1].substring(b[1].indexOf("''")+2)):null}},"./src/request/asset-manager.js":(P,v,d)=>{d.r(v),d.d(v,{AssetManager:()=>O});function j(l,s){if(!(l instanceof s))throw new TypeError("Cannot call a class as a function")}function g(l,s){for(var e=0;e<s.length;e++){var t=s[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(l,t.key,t)}}function w(l,s,e){return s&&g(l.prototype,s),e&&g(l,e),Object.defineProperty(l,"prototype",{writable:!1}),l}var O=function(){function l(){j(this,l)}return w(l,[{key:"loadCollection",value:function(e,t){var a=this,r=e.js?e.js:[],n=e.css?e.css:[],i=e.img?e.img:[];r=y(r,function(h){return!document.querySelector('head script[src="'+h+'"]')}),n=y(n,function(h){return!document.querySelector('head link[href="'+h+'"]')});var o=0,u=!1,f=!1;if(r.length===0&&n.length===0&&i.length===0){t&&t();return}this.loadJavaScript(r,function(){u=!0,c()}),n.forEach(function(h){a.loadStyleSheet(h,function(){o++,c()})}),this.loadImage(i,function(){f=!0,c()});function c(){if(!f||!u||o<n.length)return!1;t&&t()}}},{key:"loadStyleSheet",value:function(e,t){var a=document.createElement("link");return a.setAttribute("rel","stylesheet"),a.setAttribute("type","text/css"),a.setAttribute("href",e),a.addEventListener("load",t,!1),typeof a<"u"&&document.getElementsByTagName("head")[0].appendChild(a),a}},{key:"loadJavaScript",value:function(e,t){if(e.length<=0)return t();var a=this,r=e.shift(),n=document.createElement("script");n.setAttribute("type","text/javascript"),n.setAttribute("src",r),n.addEventListener("load",function(){a.loadJavaScript(e,t)},!1),typeof n<"u"&&document.getElementsByTagName("head")[0].appendChild(n)}},{key:"loadImage",value:function(e,t){if(e.length<=0)return t();var a=0;e.forEach(function(r){var n=new Image;n.onload=function(){++a==e.length&&t&&t()},n.src=r})}}],[{key:"load",value:function(e,t){return new l().loadCollection(e,t)}}]),l}();function y(l,s){var e=[],t=l.length,a=0;for(a;a<t;a++)s(l[a])&&e.push(l[a]);return e}},"./src/request/data.js":(P,v,d)=>{d.r(v),d.d(v,{Data:()=>y});var j=d("./src/util/form-serializer.js");function g(l,s){if(!(l instanceof s))throw new TypeError("Cannot call a class as a function")}function w(l,s){for(var e=0;e<s.length;e++){var t=s[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(l,t.key,t)}}function O(l,s,e){return s&&w(l.prototype,s),e&&w(l,e),Object.defineProperty(l,"prototype",{writable:!1}),l}var y=function(){function l(s,e,t){g(this,l),this.userData=s||{},this.targetEl=e,this.formEl=t}return O(l,[{key:"getRequestData",value:function(){var e;return this.formEl?e=new FormData(this.formEl):e=new FormData,this.appendSingleInputElement(e),e}},{key:"getAsFormData",value:function(){return this.appendJsonToFormData(this.getRequestData(),this.userData)}},{key:"getAsQueryString",value:function(){return this.convertFormDataToQuery(this.getAsFormData())}},{key:"getAsJsonData",value:function(){return JSON.stringify(this.convertFormDataToJson(this.getAsFormData()))}},{key:"appendSingleInputElement",value:function(e){if(!(this.formEl||!this.targetEl)&&["INPUT","SELECT"].indexOf(this.targetEl.tagName)!==-1){var t=this.targetEl.name;!t||this.userData[t]!==void 0||(this.targetEl.type==="file"?this.targetEl.files.forEach(function(a){e.append(t,a)}):e.append(t,this.targetEl.value))}}},{key:"appendJsonToFormData",value:function(e,t,a){var r=this;for(var n in t){var i=n;a&&(i=a+"["+n+"]");var o=t[n];o&&o.constructor==={}.constructor?this.appendJsonToFormData(e,o,i):o&&o.constructor===[].constructor?o.forEach(function(u,f){u.constructor==={}.constructor||u.constructor===[].constructor?r.appendJsonToFormData(e,u,i+"["+f+"]"):e.append(i+"[]",r.castJsonToFormData(u))}):e.append(i,this.castJsonToFormData(o))}return e}},{key:"convertFormDataToQuery",value:function(e){var t=this.formDataToArray(e);return Object.keys(t).map(function(a){return a.endsWith("[]")?t[a].map(function(r){return encodeURIComponent(a)+"="+encodeURIComponent(r)}).join("&"):encodeURIComponent(a)+"="+encodeURIComponent(t[a])}).join("&")}},{key:"convertFormDataToJson",value:function(e){var t=this.formDataToArray(e),a={};for(var r in t)j.FormSerializer.assignToObj(a,r,t[r]);return a}},{key:"formDataToArray",value:function(e){return Object.fromEntries(Array.from(e.keys()).map(function(t){return[t,t.endsWith("[]")?e.getAll(t):e.getAll(t).pop()]}))}},{key:"castJsonToFormData",value:function(e){return e===null?"":e===!0?"1":e===!1?"0":e}}]),l}()},"./src/request/index.js":(P,v,d)=>{d.r(v),d.d(v,{default:()=>w});var j=d("./src/request/asset-manager.js"),g=d("./src/request/namespace.js");const w=g.default;window.oc||(window.oc={}),window.oc.AjaxRequest||(window.oc.AjaxRequest=g.default,window.oc.AssetManager=j.AssetManager,window.oc.ajax=g.default.send,window.oc.request||(window.oc.request=g.default.sendElement))},"./src/request/namespace.js":(P,v,d)=>{d.r(v),d.d(v,{default:()=>g});var j=d("./src/request/request.js");const g=j.Request},"./src/request/options.js":(P,v,d)=>{d.r(v),d.d(v,{Options:()=>y});function j(l){return j=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},j(l)}function g(l,s){if(!(l instanceof s))throw new TypeError("Cannot call a class as a function")}function w(l,s){for(var e=0;e<s.length;e++){var t=s[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(l,t.key,t)}}function O(l,s,e){return s&&w(l.prototype,s),e&&w(l,e),Object.defineProperty(l,"prototype",{writable:!1}),l}var y=function(){function l(s,e){if(g(this,l),!s)throw new Error("The request handler name is not specified.");if(!s.match(/^(?:\w+\:{2})?on*/))throw new Error('Invalid handler name. The correct handler name format is: "onEvent".');if(typeof FormData>"u")throw new Error("The browser does not support the FormData interface.");this.options=e,this.handler=s}return O(l,[{key:"getRequestOptions",value:function(){return{method:"POST",url:this.options.url?this.options.url:window.location.href,headers:this.buildHeaders(),responseType:this.options.download===!1?"":"blob"}}},{key:"buildHeaders",value:function(){var e=this.handler,t=this.options,a={"X-Requested-With":"XMLHttpRequest","X-OCTOBER-REQUEST-HANDLER":e};t.files||(a["Content-Type"]=t.bulk?"application/json":"application/x-www-form-urlencoded"),t.flash&&(a["X-OCTOBER-REQUEST-FLASH"]=1),t.partial&&(a["X-OCTOBER-REQUEST-PARTIAL"]=t.partial);var r=this.extractPartials(t.update,t.partial);r&&(a["X-OCTOBER-REQUEST-PARTIALS"]=r);var n=this.getXSRFToken();n&&(a["X-XSRF-TOKEN"]=n);var i=this.getCSRFToken();return i&&(a["X-CSRF-TOKEN"]=i),t.headers&&t.headers.constructor==={}.constructor&&Object.assign(a,t.headers),a}},{key:"extractPartials",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=[];if(e){if(j(e)!=="object")throw new Error("Invalid update value. The correct format is an object ({...})");for(var r in e)r==="_self"&&t?a.push(t):a.push(r)}return a.join("&")}},{key:"getCSRFToken",value:function(){var e=document.querySelector('meta[name="csrf-token"]');return e?e.getAttribute("content"):null}},{key:"getXSRFToken",value:function(){var e=null;if(document.cookie&&document.cookie!="")for(var t=document.cookie.split(";"),a=0;a<t.length;a++){var r=t[a].replace(/^([\s]*)|([\s]*)$/g,"");if(r.substring(0,11)=="XSRF-TOKEN="){e=decodeURIComponent(r.substring(11));break}}return e}}],[{key:"fetch",value:function(e,t){return new this(e,t).getRequestOptions()}}]),l}()},"./src/request/request.js":(P,v,d)=>{d.r(v),d.d(v,{Request:()=>o});var j=d("./src/request/options.js"),g=d("./src/request/actions.js"),w=d("./src/request/data.js"),O=d("./src/util/http-request.js"),y=d("./src/util/deferred.js"),l=d("./src/extras/progress-bar.js"),s=d("./src/util/index.js");function e(u,f){var c=Object.keys(u);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(u);f&&(h=h.filter(function(E){return Object.getOwnPropertyDescriptor(u,E).enumerable})),c.push.apply(c,h)}return c}function t(u){for(var f=1;f<arguments.length;f++){var c=arguments[f]!=null?arguments[f]:{};f%2?e(Object(c),!0).forEach(function(h){a(u,h,c[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(c)):e(Object(c)).forEach(function(h){Object.defineProperty(u,h,Object.getOwnPropertyDescriptor(c,h))})}return u}function a(u,f,c){return f in u?Object.defineProperty(u,f,{value:c,enumerable:!0,configurable:!0,writable:!0}):u[f]=c,u}function r(u,f){if(!(u instanceof f))throw new TypeError("Cannot call a class as a function")}function n(u,f){for(var c=0;c<f.length;c++){var h=f[c];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(u,h.key,h)}}function i(u,f,c){return f&&n(u.prototype,f),c&&n(u,c),Object.defineProperty(u,"prototype",{writable:!1}),u}var o=function(){function u(f,c,h){var E=this;r(this,u),this.el=f,this.handler=c,this.options=t(t({},this.constructor.DEFAULTS),h||{}),this.context={el:f,handler:c,options:this.options},this.progressBar=new l.ProgressBar,this.showProgressBar=function(){E.progressBar.show({cssClass:"is-ajax"})}}return i(u,[{key:"start",value:function(){if(this.notifyApplicationAjaxSetup(),this.initOtherElements(),this.preprocessOptions(),this.actions=new g.Actions(this,this.context,this.options),!(!this.validateClientSideForm()||!this.applicationAllowsRequest())){var c=new w.Data(this.options.data,this.el,this.formEl),h;this.options.files?h=c.getAsFormData():this.options.bulk?h=c.getAsJsonData():h=c.getAsQueryString(),this.options.query&&this.actions.invoke("applyQueryToUrl",[this.options.query]);var E=j.Options.fetch(this.handler,this.options),p=E.url,k=E.headers,m=E.method,b=E.responseType;if(this.request=new O.HttpRequest(this,p,{method:m,headers:k,responseType:b,data:h,trackAbort:!0}),this.promise=new y.Deferred({delegate:this.request}),this.isRedirect=this.options.redirect&&this.options.redirect.length>0,!(this.options.confirm&&!this.actions.invoke("handleConfirmMessage",[this.options.confirm])))return this.sendInternal(),this.promise}}},{key:"sendInternal",value:function(){var c=this;this.notifyApplicationBeforeSend(),this.notifyApplicationAjaxPromise(),this.promise.fail(function(h,E,p){c.isRedirect||c.notifyApplicationAjaxFail(h,E,p)}).done(function(h,E,p){c.isRedirect||c.notifyApplicationAjaxDone(h,E,p)}).always(function(h,E,p){c.notifyApplicationAjaxAlways(h,E,p)}),this.request.send()}},{key:"toggleRedirect",value:function(c){c?(this.options.redirect=c,this.isRedirect=!0):(this.options.redirect=null,this.isRedirect=!1)}},{key:"applicationAllowsRequest",value:function(){var c=this.notifyApplicationBeforeRequest();return!c.defaultPrevented}},{key:"applicationAllowsUpdate",value:function(c,h,E){var p=this.notifyApplicationBeforeUpdate(c,h,E);return!p.defaultPrevented}},{key:"applicationAllowsError",value:function(c,h,E){var p=this.notifyApplicationRequestError(c,h,E);return!p.defaultPrevented}},{key:"notifyApplicationAjaxSetup",value:function(){return(0,s.dispatch)("ajax:setup",{target:this.el,detail:{context:this.context}})}},{key:"notifyApplicationAjaxPromise",value:function(){return(0,s.dispatch)("ajax:promise",{target:this.el,detail:{context:this.context}})}},{key:"notifyApplicationAjaxFail",value:function(c,h,E){return(0,s.dispatch)("ajax:fail",{target:this.el,detail:{context:this.context,data:c,responseCode:h,xhr:E}})}},{key:"notifyApplicationAjaxDone",value:function(c,h,E){return(0,s.dispatch)("ajax:done",{target:this.el,detail:{context:this.context,data:c,responseCode:h,xhr:E}})}},{key:"notifyApplicationAjaxAlways",value:function(c,h,E){return(0,s.dispatch)("ajax:always",{target:this.el,detail:{context:this.context,data:c,responseCode:h,xhr:E}})}},{key:"notifyApplicationAjaxUpdate",value:function(c,h,E,p){return(0,s.dispatch)("ajax:update",{target:c,detail:{context:this.context,data:h,responseCode:E,xhr:p}})}},{key:"notifyApplicationBeforeRedirect",value:function(){return(0,s.dispatch)("ajax:before-redirect",{target:this.el})}},{key:"notifyApplicationBeforeRequest",value:function(){return(0,s.dispatch)("ajax:before-request",{target:this.triggerEl,detail:{context:this.context}})}},{key:"notifyApplicationBeforeUpdate",value:function(c,h,E){return(0,s.dispatch)("ajax:before-update",{target:this.triggerEl,detail:{context:this.context,data:c,responseCode:h,xhr:E}})}},{key:"notifyApplicationRequestSuccess",value:function(c,h,E){return(0,s.dispatch)("ajax:request-success",{target:this.triggerEl,detail:{context:this.context,data:c,responseCode:h,xhr:E}})}},{key:"notifyApplicationRequestError",value:function(c,h,E){return(0,s.dispatch)("ajax:request-error",{target:this.triggerEl,detail:{context:this.context,message:c,responseCode:h,xhr:E}})}},{key:"notifyApplicationRequestComplete",value:function(c,h,E){return(0,s.dispatch)("ajax:request-complete",{target:this.triggerEl,detail:{context:this.context,data:c,responseCode:h,xhr:E}})}},{key:"notifyApplicationBeforeValidate",value:function(c,h){return(0,s.dispatch)("ajax:before-validate",{target:this.triggerEl,detail:{context:this.context,message:c,fields:h}})}},{key:"notifyApplicationBeforeReplace",value:function(c){return(0,s.dispatch)("ajax:before-replace",{target:c})}},{key:"notifyApplicationBeforeSend",value:function(){return(0,s.dispatch)("ajax:before-send",{target:window,detail:{context:this.context}})}},{key:"notifyApplicationUpdateComplete",value:function(c,h,E){return(0,s.dispatch)("ajax:update-complete",{target:window,detail:{context:this.context,data:c,responseCode:h,xhr:E}})}},{key:"notifyApplicationFieldInvalid",value:function(c,h,E,p){return(0,s.dispatch)("ajax:invalid-field",{target:window,detail:{element:c,fieldName:h,errorMsg:E,isFirst:p}})}},{key:"notifyApplicationConfirmMessage",value:function(c,h){return(0,s.dispatch)("ajax:confirm-message",{target:window,detail:{message:c,promise:h}})}},{key:"notifyApplicationErrorMessage",value:function(c){return(0,s.dispatch)("ajax:error-message",{target:window,detail:{message:c}})}},{key:"requestStarted",value:function(){this.markAsProgress(!0),this.toggleLoadingElement(!0),this.options.progressBar&&this.showProgressBarAfterDelay(),this.actions.invoke("start",[this.request.xhr])}},{key:"requestProgressed",value:function(c){this.promise.notify(c)}},{key:"requestCompletedWithResponse",value:function(c,h){this.actions.invoke("success",[c,h,this.request.xhr]),this.actions.invoke("complete",[c,h,this.request.xhr]),this.promise.resolve(c,h,this.request.xhr)}},{key:"requestFailedWithStatusCode",value:function(c,h){this.actions.invoke("error",[h,c,this.request.xhr]),this.actions.invoke("complete",[h,c,this.request.xhr]),this.promise.reject(h,c,this.request.xhr)}},{key:"requestFinished",value:function(){this.markAsProgress(!1),this.toggleLoadingElement(!1),this.options.progressBar&&this.hideProgressBar()}},{key:"initOtherElements",value:function(){typeof this.options.form=="string"?this.formEl=document.querySelector(this.options.form):this.options.form?this.formEl=this.options.form:this.formEl=this.el&&this.el!==document?this.el.closest("form"):null,this.triggerEl=this.formEl?this.formEl:this.el,this.partialEl=this.el&&this.el!==document?this.el.closest("[data-ajax-partial]"):null,this.loadingEl=typeof this.options.loading=="string"?document.querySelector(this.options.loading):this.options.loading}},{key:"preprocessOptions",value:function(){this.options.partial===void 0&&this.partialEl&&this.partialEl.dataset.ajaxPartial!==void 0&&(this.options.partial=this.partialEl.dataset.ajaxPartial||!0)}},{key:"validateClientSideForm",value:function(){return this.options.browserValidate&&typeof document.createElement("input").reportValidity=="function"&&this.formEl&&!this.formEl.checkValidity()?(this.formEl.reportValidity(),!1):!0}},{key:"toggleLoadingElement",value:function(c){if(this.loadingEl){if(typeof this.loadingEl.show!="function"||typeof this.loadingEl.hide!="function"){this.loadingEl.style.display=c?"block":"none";return}c?this.loadingEl.show():this.loadingEl.hide()}}},{key:"showProgressBarAfterDelay",value:function(){this.progressBar.setValue(0),this.progressBarTimeout=window.setTimeout(this.showProgressBar,this.options.progressBarDelay)}},{key:"hideProgressBar",value:function(){this.progressBar.setValue(100),this.progressBar.hide(),this.progressBarTimeout!=null&&(window.clearTimeout(this.progressBarTimeout),delete this.progressBarTimeout)}},{key:"markAsProgress",value:function(c){c?(document.documentElement.setAttribute("data-ajax-progress",""),this.formEl&&this.formEl.setAttribute("data-ajax-progress",this.handler)):(document.documentElement.removeAttribute("data-ajax-progress"),this.formEl&&this.formEl.removeAttribute("data-ajax-progress"))}}],[{key:"DEFAULTS",get:function(){return{handler:null,update:{},files:!1,bulk:!1,download:!1,browserValidate:!1,browserTarget:null,progressBarDelay:500,progressBar:null}}},{key:"send",value:function(c,h){return new u(document,c,h).start()}},{key:"sendElement",value:function(c,h,E){return typeof c=="string"&&(c=document.querySelector(c)),new u(c,h,E).start()}}]),u}()},"./src/util/deferred.js":(P,v,d)=>{d.r(v),d.d(v,{Deferred:()=>y,DeferredState:()=>O});function j(l,s){if(!(l instanceof s))throw new TypeError("Cannot call a class as a function")}function g(l,s){for(var e=0;e<s.length;e++){var t=s[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(l,t.key,t)}}function w(l,s,e){return s&&g(l.prototype,s),e&&g(l,e),Object.defineProperty(l,"prototype",{writable:!1}),l}var O={pending:"pending",rejected:"rejected",resolved:"resolved"},y=function(){function l(s){j(this,l),this.options=s||{},this.stateStr=O.pending,this.successFuncs=[],this.failureFuncs=[],this.progressFuncs=[],this.resolveArgs=[],this.rejectArgs=[],this.progressArgs=[],this.isProgressNotified=!1}return w(l,[{key:"resolve",value:function(){return this.stateStr===O.pending&&(this.resolveArgs=arguments,this.callFunction.call(this,this.successFuncs,this.resolveArgs),this.stateStr=O.resolved),this}},{key:"reject",value:function(){return this.stateStr===O.pending&&(this.rejectArgs=arguments,this.callFunction.call(this,this.failureFuncs,this.rejectArgs),this.stateStr=O.rejected),this}},{key:"notify",value:function(){return this.stateStr===O.pending&&(this.progressArgs=arguments,this.callFunction.call(this,this.progressFuncs,this.progressArgs),this.isProgressNotified=!0),this}},{key:"abort",value:function(){this.options.delegate&&this.options.delegate.abort()}},{key:"done",value:function(){var e=Array.prototype.slice.call(arguments);return this.successFuncs=this.successFuncs.concat(e),this.stateStr===O.resolved&&this.callFunction.call(this,e,this.resolveArgs),this}},{key:"fail",value:function(){var e=Array.prototype.slice.call(arguments);return this.failureFuncs=this.failureFuncs.concat(e),this.stateStr===O.rejected&&this.callFunction.call(this,e,this.rejectArgs),this}},{key:"progress",value:function(){var e=Array.prototype.slice.call(arguments);return this.progressFuncs=this.progressFuncs.concat(e),this.stateStr===O.pending&&this.isProgressNotified&&this.callFunction.call(this,e,this.progressArgs),this}},{key:"always",value:function(){var e=Array.prototype.slice.call(arguments);return this.successFuncs=this.successFuncs.concat(e),this.failureFuncs=this.failureFuncs.concat(e),this.stateStr!==O.pending&&this.callFunction.call(this,e,this.resolveArgs||this.rejectArgs),this}},{key:"then",value:function(){var e=[];for(var t in arguments){var a;Array.isArray(arguments[t])?a=arguments[t]:a=[arguments[t]],e.push(a)}return this.done.apply(this,e[0]),this.fail.apply(this,e[1]),this.progress.apply(this,e[2]),this}},{key:"promise",value:function(){var e=["resolve","reject","promise","notify"],t={};for(var a in this)e.indexOf(a)===-1&&(t[a]=this[a]);return t}},{key:"state",value:function(){return arguments.length>0&&(stateStr=arguments[0]),stateStr}},{key:"callFunction",value:function(e,t,a){a=a||{};var r=a.scope||this;for(var n in e){var i=e[n];typeof i=="function"&&i.apply(r,t)}}}]),l}()},"./src/util/events.js":(P,v,d)=>{d.r(v),d.d(v,{Events:()=>E});var j=d("./src/util/index.js");function g(A,x){var T=typeof Symbol<"u"&&A[Symbol.iterator]||A["@@iterator"];if(!T){if(Array.isArray(A)||(T=y(A))||x&&A&&typeof A.length=="number"){T&&(A=T);var S=0,D=function(){};return{s:D,n:function(){return S>=A.length?{done:!0}:{done:!1,value:A[S++]}},e:function(U){throw U},f:D}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var M=!0,F=!1,I;return{s:function(){T=T.call(A)},n:function(){var U=T.next();return M=U.done,U},e:function(U){F=!0,I=U},f:function(){try{!M&&T.return!=null&&T.return()}finally{if(F)throw I}}}}function w(A,x){return e(A)||s(A,x)||y(A,x)||O()}function O(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function y(A,x){if(A){if(typeof A=="string")return l(A,x);var T=Object.prototype.toString.call(A).slice(8,-1);if(T==="Object"&&A.constructor&&(T=A.constructor.name),T==="Map"||T==="Set")return Array.from(A);if(T==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(T))return l(A,x)}}function l(A,x){(x==null||x>A.length)&&(x=A.length);for(var T=0,S=new Array(x);T<x;T++)S[T]=A[T];return S}function s(A,x){var T=A==null?null:typeof Symbol<"u"&&A[Symbol.iterator]||A["@@iterator"];if(T!=null){var S=[],D=!0,M=!1,F,I;try{for(T=T.call(A);!(D=(F=T.next()).done)&&(S.push(F.value),!(x&&S.length===x));D=!0);}catch(L){M=!0,I=L}finally{try{!D&&T.return!=null&&T.return()}finally{if(M)throw I}}return S}}function e(A){if(Array.isArray(A))return A}function t(A,x){if(!(A instanceof x))throw new TypeError("Cannot call a class as a function")}function a(A,x){for(var T=0;T<x.length;T++){var S=x[T];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(A,S.key,S)}}function r(A,x,T){return x&&a(A.prototype,x),T&&a(A,T),Object.defineProperty(A,"prototype",{writable:!1}),A}var n=/[^.]*(?=\..*)\.|.*/,i=/\..*/,o=/::\d+$/,u={},f=1,c={mouseenter:"mouseover",mouseleave:"mouseout"},h=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]),E=function(){function A(){t(this,A)}return r(A,null,[{key:"on",value:function(T,S,D,M){R(T,S,D,M,!1)}},{key:"one",value:function(T,S,D,M){R(T,S,D,M,!0)}},{key:"off",value:function(T,S,D,M){if(!(typeof S!="string"||!T)){var F=b(S,D,M),I=w(F,3),L=I[0],U=I[1],J=I[2],G=J!==S,H=k(T),Q=H[J]||{},Z=S.startsWith(".");if(typeof U<"u"){if(!Q)return;C(T,H,J,U,L?D:null);return}if(Z)for(var N=0,ee=Object.keys(H);N<ee.length;N++){var te=ee[N];X(T,H,te,S.slice(1))}for(var W=0,re=Object.keys(Q);W<re.length;W++){var ae=re[W],oe=ae.replace(o,"");if(!G||S.includes(oe)){var ie=Q[ae];C(T,H,J,ie.callable,ie.delegationSelector)}}}}},{key:"dispatch",value:function(T){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},D=S.target,M=S.detail,F=S.cancelable,I=F===void 0?!0:F;return(0,j.dispatch)(T,{target:D,detail:M,cancelable:I})}}]),A}();function p(A,x){return x&&"".concat(x,"::").concat(f++)||A.uidEvent||f++}function k(A){var x=p(A);return A.uidEvent=x,u[x]=u[x]||{},u[x]}function m(A,x){var T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;return Object.values(A).find(function(S){return S.callable===x&&S.delegationSelector===T})}function b(A,x,T){var S=typeof x=="string",D=S?T:x,M=q(A);return h.has(M)||(M=A),[S,D,M]}function R(A,x,T,S,D){if(!(typeof x!="string"||!A)){var M=b(x,T,S),F=w(M,3),I=F[0],L=F[1],U=F[2];if(x in c){var J=function(te){return function(W){if(!W.relatedTarget||W.relatedTarget!==W.delegateTarget&&!W.delegateTarget.contains(W.relatedTarget))return te.call(this,W)}};L=J(L)}var G=k(A),H=G[U]||(G[U]={}),Q=m(H,L,I?T:null);if(Q){Q.oneOff=Q.oneOff&&D;return}var Z=p(L,x.replace(n,"")),N=I?B(A,T,L):_(A,L);N.delegationSelector=I?T:null,N.callable=L,N.oneOff=D,N.uidEvent=Z,H[Z]=N,A.addEventListener(U,N)}}function C(A,x,T,S,D){var M=m(x[T],S,D);M&&(A.removeEventListener(T,M),delete x[T][M.uidEvent])}function _(A,x){return function T(S){return S.delegateTarget=A,T.oneOff&&E.off(A,S.type,x),x.apply(A,[S])}}function B(A,x,T){return function S(D){for(var M=A.querySelectorAll(x),F=D.target;F&&F!==this;F=F.parentNode){var I=g(M),L;try{for(I.s();!(L=I.n()).done;){var U=L.value;if(U===F)return D.delegateTarget=F,S.oneOff&&E.off(A,D.type,x,T),T.apply(F,[D])}}catch(J){I.e(J)}finally{I.f()}}}}function X(A,x,T,S){for(var D=x[T]||{},M=0,F=Object.keys(D);M<F.length;M++){var I=F[M];if(I.includes(S)){var L=D[I];C(A,x,T,L.callable,L.delegationSelector)}}}function q(A){return A=A.replace(i,""),c[A]||A}},"./src/util/form-serializer.js":(P,v,d)=>{d.r(v),d.d(v,{FormSerializer:()=>O});function j(y,l){if(!(y instanceof l))throw new TypeError("Cannot call a class as a function")}function g(y,l){for(var s=0;s<l.length;s++){var e=l[s];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(y,e.key,e)}}function w(y,l,s){return l&&g(y.prototype,l),s&&g(y,s),Object.defineProperty(y,"prototype",{writable:!1}),y}var O=function(){function y(){j(this,y)}return w(y,[{key:"parseContainer",value:function(s){var e=this,t={};return s.querySelectorAll("input, select").forEach(function(a){e.assignObjectInternal(t,a.name,a.value)}),t}},{key:"assignObjectInternal",value:function(s,e,t){this.assignObjectNested(s,this.nameToArray(e),t)}},{key:"assignObjectNested",value:function(s,e,t){var a=s,r=e.length-1;e.forEach(function(n,i){a[n]===void 0&&(a[n]={}),i===r&&(a[n]=t),a=a[n]})}},{key:"nameToArray",value:function(s){for(var e=/([^\]\[]+)/g,t=[],a;a=e.exec(s);)t.push(a[0]);return t}}],[{key:"assignToObj",value:function(s,e,t){new y().assignObjectInternal(s,e,t)}},{key:"serializeJSON",value:function(s){return new y().parseContainer(s)}}]),y}()},"./src/util/http-request.js":(P,v,d)=>{d.r(v),d.d(v,{HttpRequest:()=>l,SystemStatusCode:()=>y});var j=d("./src/util/events.js");function g(a,r){if(!(a instanceof r))throw new TypeError("Cannot call a class as a function")}function w(a,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(a,i.key,i)}}function O(a,r,n){return r&&w(a.prototype,r),n&&w(a,n),Object.defineProperty(a,"prototype",{writable:!1}),a}var y={networkFailure:0,timeoutFailure:-1,contentTypeMismatch:-2,userAborted:-3},l=function(){function a(r,n,i){var o=this;g(this,a),this.failed=!1,this.progress=0,this.sent=!1,this.delegate=r,this.url=n,this.options=i,this.headers=i.headers||{},this.method=i.method||"GET",this.responseType=i.responseType||"",this.data=i.data,this.timeout=i.timeout||0,this.requestProgressed=function(u){u.lengthComputable&&o.setProgress(u.loaded/u.total)},this.requestLoaded=function(){o.endRequest(function(u){o.processResponseData(u,function(f,c){var h=f.getResponseHeader("Content-Type"),E=t(h)?JSON.parse(c):c;if(o.options.htmlOnly&&!e(h)){o.failed=!0,o.delegate.requestFailedWithStatusCode(y.contentTypeMismatch);return}f.status>=200&&f.status<300?o.delegate.requestCompletedWithResponse(E,f.status,s(f,o.url)):(o.failed=!0,o.delegate.requestFailedWithStatusCode(f.status,E))})})},this.requestFailed=function(){o.endRequest(function(){o.failed=!0,o.delegate.requestFailedWithStatusCode(y.networkFailure)})},this.requestTimedOut=function(){o.endRequest(function(){o.failed=!0,o.delegate.requestFailedWithStatusCode(y.timeoutFailure)})},this.requestCanceled=function(){o.options.trackAbort?o.endRequest(function(){o.failed=!0,o.delegate.requestFailedWithStatusCode(y.userAborted)}):o.endRequest()},this.createXHR()}return O(a,[{key:"send",value:function(){this.xhr&&!this.sent&&(this.notifyApplicationBeforeRequestStart(),this.setProgress(0),this.xhr.send(this.data||null),this.sent=!0,this.delegate.requestStarted())}},{key:"abort",value:function(){this.xhr&&this.sent&&this.xhr.abort()}},{key:"notifyApplicationBeforeRequestStart",value:function(){j.Events.dispatch("ajax:request-start",{detail:{url:this.url,xhr:this.xhr},cancelable:!1})}},{key:"notifyApplicationAfterRequestEnd",value:function(){j.Events.dispatch("ajax:request-end",{detail:{url:this.url,xhr:this.xhr},cancelable:!1})}},{key:"createXHR",value:function(){var n=this.xhr=new XMLHttpRequest;n.open(this.method,this.url,!0),n.responseType=this.responseType,n.onprogress=this.requestProgressed,n.onload=this.requestLoaded,n.onerror=this.requestFailed,n.ontimeout=this.requestTimedOut,n.onabort=this.requestCanceled,this.timeout&&(n.timeout=this.timeout*1e3);for(var i in this.headers)n.setRequestHeader(i,this.headers[i]);return n}},{key:"endRequest",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){};this.xhr&&(this.notifyApplicationAfterRequestEnd(),n(this.xhr),this.destroy())}},{key:"setProgress",value:function(n){this.progress=n,this.delegate.requestProgressed(n)}},{key:"destroy",value:function(){this.setProgress(1),this.delegate.requestFinished()}},{key:"processResponseData",value:function(n,i){if(this.responseType!=="blob"){i(n,n.responseText);return}var o=n.getResponseHeader("Content-Disposition")||"";if(o.indexOf("attachment")===0||o.indexOf("inline")===0){i(n,n.response);return}var u=new FileReader;u.addEventListener("load",function(){i(n,u.result)}),u.readAsText(n.response)}}]),a}();function s(a,r){if(a.getResponseHeader("X-OCTOBER-LOCATION"))return a.getResponseHeader("X-OCTOBER-LOCATION");var n=r.match(/^(.*)#/),i=n?n[1]:r;return i!==a.responseURL?a.responseURL:null}function e(a){return(a||"").match(/^text\/html|^application\/xhtml\+xml/)}function t(a){return(a||"").includes("application/json")}},"./src/util/index.js":(P,v,d)=>{d.r(v),d.d(v,{array:()=>l,defer:()=>g,dispatch:()=>j,unindent:()=>w,uuid:()=>s});function j(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=t.target,r=t.detail,n=t.cancelable,i=n===void 0?!0:n,o=new CustomEvent(e,{bubbles:!0,cancelable:i===!0,detail:r||{}});return(a||document).dispatchEvent(o),o}function g(e){setTimeout(e,1)}function w(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),r=1;r<t;r++)a[r-1]=arguments[r];var n=O(y(e,a)).split(`
`),i=n[0].match(/^\s+/),o=i?i[0].length:0;return n.map(function(u){return u.slice(o)}).join(`
`)}function O(e){return e.replace(/^\n/,"")}function y(e,t){return e.reduce(function(a,r,n){var i=t[n]==null?"":t[n];return a+r+i},"")}function l(e){return Array.prototype.slice.call(e)}function s(){return Array.apply(null,{length:36}).map(function(e,t){return t==8||t==13||t==18||t==23?"-":t==14?"4":t==19?(Math.floor(Math.random()*4)+8).toString(16):Math.floor(Math.random()*15).toString(16)}).join("")}},"./src/util/json-parser.js":(P,v,d)=>{d.r(v),d.d(v,{JsonParser:()=>y});function j(l){return j=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},j(l)}function g(l,s){if(!(l instanceof s))throw new TypeError("Cannot call a class as a function")}function w(l,s){for(var e=0;e<s.length;e++){var t=s[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(l,t.key,t)}}function O(l,s,e){return s&&w(l.prototype,s),e&&w(l,e),Object.defineProperty(l,"prototype",{writable:!1}),l}var y=function(){function l(){g(this,l)}return O(l,[{key:"parseString",value:function(e){if(e=e.trim(),!e.length)throw new Error("Broken JSON object.");for(var t="";e&&e[0]===",";)e=e.substr(1);if(e[0]==='"'||e[0]==="'"){if(e[e.length-1]!==e[0])throw new Error("Invalid string JSON object.");for(var a='"',r=1;r<e.length;r++)if(e[r]==="\\")e[r+1]==="'"||(a+=e[r]),a+=e[r+1],r++;else{if(e[r]===e[0])return a+='"',a;e[r]==='"'?a+='\\"':a+=e[r]}throw new Error("Invalid string JSON object.")}if(e==="true"||e==="false")return e;if(e==="null")return"null";var n=parseFloat(e);if(!isNaN(n))return n.toString();if(e[0]==="{"){for(var i="needKey",t="{",r=1;r<e.length;r++)if(!this.isBlankChar(e[r])){if(i==="needKey"&&(e[r]==='"'||e[r]==="'")){var o=this.parseKey(e,r+1,e[r]);t+='"'+o+'"',r+=o.length,r+=1,i="afterKey"}else if(i==="needKey"&&this.canBeKeyHead(e[r])){var o=this.parseKey(e,r);t+='"',t+=o,t+='"',r+=o.length-1,i="afterKey"}else if(i==="afterKey"&&e[r]===":")t+=":",i=":";else if(i===":"){var a=this.getBody(e,r);r=r+a.originLength-1,t+=this.parseString(a.body),i="afterBody"}else if(i==="afterBody"||i==="needKey"){for(var u=r;e[u]===","||this.isBlankChar(e[u]);)u++;if(e[u]==="}"&&u===e.length-1){for(;t[t.length-1]===",";)t=t.substr(0,t.length-1);return t+="}",t}else u!==r&&t!=="{"&&(t+=",",i="needKey",r=u-1)}}throw new Error("Broken JSON object near "+t)}if(e[0]==="["){for(var t="[",i="needBody",r=1;r<e.length;r++)if(!(e[r]===" "||e[r]===`
`||e[r]==="	")){if(i==="needBody"){if(e[r]===","){t+="null,";continue}if(e[r]==="]"&&r===e.length-1)return t[t.length-1]===","&&(t=t.substr(0,t.length-1)),t+="]",t;var a=this.getBody(e,r);r=r+a.originLength-1,t+=this.parseString(a.body),i="afterBody"}else if(i==="afterBody"){if(e[r]===",")for(t+=",",i="needBody";e[r+1]===","||this.isBlankChar(e[r+1]);)e[r+1]===","&&(t+="null,"),r++;else if(e[r]==="]"&&r===e.length-1)return t+="]",t}}throw new Error("Broken JSON array near "+t)}}},{key:"parseKey",value:function(e,t,a){for(var r="",n=t;n<e.length;n++){if(a&&a===e[n])return r;if(!a&&(e[n]===" "||e[n]===":"))return r;r+=e[n],e[n]==="\\"&&n+1<e.length&&(r+=e[n+1],n++)}throw new Error("Broken JSON syntax near "+r)}},{key:"getBody",value:function(e,t){if(e[t]==='"'||e[t]==="'"){for(var a=e[t],r=t+1;r<e.length;r++)if(e[r]==="\\")a+=e[r],r+1<e.length&&(a+=e[r+1]),r++;else{if(e[r]===e[t])return a+=e[t],{originLength:a.length,body:a};a+=e[r]}throw new Error("Broken JSON string body near "+a)}if(e[t]==="t"){if(e.indexOf("true",t)===t)return{originLength:4,body:"true"};throw new Error("Broken JSON boolean body near "+e.substr(0,t+10))}if(e[t]==="f"){if(e.indexOf("f",t)===t)return{originLength:5,body:"false"};throw new Error("Broken JSON boolean body near "+e.substr(0,t+10))}if(e[t]==="n"){if(e.indexOf("null",t)===t)return{originLength:4,body:"null"};throw new Error("Broken JSON boolean body near "+e.substr(0,t+10))}if(e[t]==="-"||e[t]==="+"||e[t]==="."||e[t]>="0"&&e[t]<="9"){for(var a="",r=t;r<e.length;r++)if(e[r]==="-"||e[r]==="+"||e[r]==="."||e[r]>="0"&&e[r]<="9")a+=e[r];else return{originLength:a.length,body:a};throw new Error("Broken JSON number body near "+a)}if(e[t]==="{"||e[t]==="["){for(var n=[e[t]],a=e[t],r=t+1;r<e.length;r++){if(a+=e[r],e[r]==="\\")r+1<e.length&&(a+=e[r+1]),r++;else if(e[r]==='"')n[n.length-1]==='"'?n.pop():n[n.length-1]!=="'"&&n.push(e[r]);else if(e[r]==="'")n[n.length-1]==="'"?n.pop():n[n.length-1]!=='"'&&n.push(e[r]);else if(n[n.length-1]!=='"'&&n[n.length-1]!=="'"){if(e[r]==="{")n.push("{");else if(e[r]==="}")if(n[n.length-1]==="{")n.pop();else throw new Error("Broken JSON "+(e[t]==="{"?"object":"array")+" body near "+a);else if(e[r]==="[")n.push("[");else if(e[r]==="]")if(n[n.length-1]==="[")n.pop();else throw new Error("Broken JSON "+(e[t]==="{"?"object":"array")+" body near "+a)}if(!n.length)return{originLength:r-t,body:a}}throw new Error("Broken JSON "+(e[t]==="{"?"object":"array")+" body near "+a)}throw new Error("Broken JSON body near "+e.substr(t-5>=0?t-5:0,50))}},{key:"canBeKeyHead",value:function(e){return e[0]==="\\"?!1:e[0]>="a"&&e[0]<="z"||e[0]>="A"&&e[0]<="Z"||e[0]==="_"||e[0]>="0"&&e[0]<="9"||e[0]==="$"||e.charCodeAt(0)>255}},{key:"isBlankChar",value:function(e){return e===" "||e===`
`||e==="	"}}],[{key:"paramToObj",value:function(e,t){if(t===void 0&&(t=""),j(t)==="object")return t;t.charAt(0)!=="{"&&(t="{"+t+"}");try{return this.parseJSON(t)}catch(a){throw new Error("Error parsing the "+e+" attribute value. "+a)}}},{key:"parseJSON",value:function(e){return JSON.parse(new l().parseString(e))}}]),l}()}},z={};function K(P){var v=z[P];if(v!==void 0)return v.exports;var d=z[P]={exports:{}};return ne[P](d,d.exports,K),d.exports}K.amdO={},K.d=(P,v)=>{for(var d in v)K.o(v,d)&&!K.o(P,d)&&Object.defineProperty(P,d,{enumerable:!0,get:v[d]})},K.o=(P,v)=>Object.prototype.hasOwnProperty.call(P,v),K.r=P=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(P,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(P,"__esModule",{value:!0})};var se={};(()=>{/*!*********************************!*\
  !*** ./src/framework-extras.js ***!
  \*********************************/K.r(se),K("./src/request/index.js"),K("./src/core/index.js"),K("./src/extras/index.js"),K("./src/observe/index.js")})()})()});export default le();
